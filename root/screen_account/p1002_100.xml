<?xml version="1.0" encoding="UTF-8"?>
<!--
 *********************************************************************************
 **
 ** 화면을 그린 후에 필요한 작업을 한다. 
 ** - TR을 배열에 담는다. 전송은 특이한 경우가 아니면 basescreen에서 일괄적으로 전송한다.
 **
 *********************************************************************************
 -->
<actiondata value="
$readfile(plist/root/html/1002_100_1.html,1002_htmldata_1);
$readfile(plist/root/html/1002_100_2.html,1002_htmldata_2);
$readfile(plist/root/html/1002_100_3.html,1002_htmldata_3);
$readfile(plist/root/html/1002_100_4.html,1002_htmldata_4);
$readfile(plist/root/html/1002_100_5.html,1002_htmldata_5);
"/>	
<action id="screen_contents_onload" value="
	$log(확인용);
	$setvar(
		,img_step_1.hidden=false
		,img_step_2.hidden=true
		,img_step_3.hidden=true
		,img_step_4.hidden=true
		,img_step_5.hidden=true
		,img_step_6.hidden=true
		,img_step_7.hidden=true
		,img_step_8.hidden=true

		,lbl_account_title_step_1.hidden=true
		,lbl_account_title_step_2.hidden=false
		,lbl_account_title_step_3.hidden=false
		,lbl_account_title_step_4.hidden=false
		,lbl_account_title_step_5.hidden=false
		,lbl_account_title_step_6.hidden=false
		,lbl_account_title_step_7.hidden=false
		,lbl_account_title_step_8.hidden=false

		,lbl_account_title_step_1.textcolor=$cs_color_disable
		,lbl_account_title_step_2.textcolor=$cs_color_black
		,lbl_account_title_step_3.textcolor=$cs_color_disable
		,lbl_account_title_step_4.textcolor=$cs_color_disable
		,lbl_account_title_step_5.textcolor=$cs_color_disable
		,lbl_account_title_step_6.textcolor=$cs_color_disable
		,lbl_account_title_step_7.textcolor=$cs_color_disable
		,lbl_account_title_step_8.textcolor=$cs_color_disable


		,lbl_account_title_step_1.fontname=$cs_font_400
		,lbl_account_title_step_2.fontname=$cs_font_600
		,lbl_account_title_step_3.fontname=$cs_font_400
		,lbl_account_title_step_4.fontname=$cs_font_400
		,lbl_account_title_step_5.fontname=$cs_font_400
		,lbl_account_title_step_6.fontname=$cs_font_400
		,lbl_account_title_step_7.fontname=$cs_font_400
		,lbl_account_title_step_8.fontname=$cs_font_400


		,vg_open_account_title.backcolor=FFFFFF
		,popscreen_open_account_history.hidden=false
		,vg_account_title_step.hidden = false

		,menu_num=1002

        ,tmp_first_phone_slash_flage = true
        ,tmp_second_phone_slash_flage = true
	);
	//초기화 
	$callaction(fnConfig_SetValue,g_tf_1002_confirm_2_var,);
	$callaction(fnConfig_SetValue,g_tf_1002_confirm_2_encvar,);
	$callaction(fnConfig_SetValue,g_IN_AGREE_RMN_NO,);

"/>

<action id="screen_1002_100_onunload" 
value="
	$stopnstimer(TIMER_SMS_INPUT); 

	$delvar(
		1002_htmldata_1
		,1002_htmldata_2
		,1002_htmldata_3
		,1002_htmldata_4
		,1002_htmldata_5
	);
" />
<action id="btn_pop_info_1002_100_onClicked"
value="
	$setvar(
		tmp_pop_info_x_cal = $result($img_pop_info_1002.x_abs + $w($g_lcdwidth,0.6))
		,tmp_pop_imfo_y_cal = $result($img_pop_info_1002.y_abs + $h($g_lcdHeight,2.6))
	);
	$callaction(popscreen_open_account_confirm_onclicked,$tmp_pop_info_x_cal,$tmp_pop_imfo_y_cal);
"/>
<action id="fnBtnAfConfirmCheck"
value="
	if($strlen($tf_1002_confirm_1.value) > 0 
	&& $strlen($g_tf_1002_confirm_2_var) > 0
	&& $strlen($tf_1002_confirm_3.value) > 0
	&& $1002_phone_choice.key != -1
	){
		return true;
	}else{
		return false;
	}
"/>
<action id="tf_1002_confirm_3_onChange"
value="
	$log($this.value);
	$delvar(tmp_before_value,tmp_keypad_value,tmp_keypad_value_str_len);
	$setvar(
		tmp_id = $this.id
		,tmp_keypad_value = $tmp_id.value
		,tmp_keypad_value_str_len = $strlen($tmp_keypad_value)
	);
	$logvar(tmp_id, tmp_before_value);
	if($tmp_keypad_value_str_len >= 13){
		return;
	}

	if($tmp_keypad_value_str_len == 4 && $tmp_first_phone_slash_flage){
        $setvar(
            ,$($tmp_id).value = $formatstring(###-#,$tmp_keypad_value)
            ,tmp_first_phone_slash_flage = false
        );
    }elseif($tmp_keypad_value_str_len == 4 && !$tmp_first_phone_slash_flage){
        $setvar(
            ,$($tmp_id).value = $replace(-,,$tmp_keypad_value)
            ,tmp_first_phone_slash_flage = true
        );
    }elseif($tmp_keypad_value_str_len == 9 && $tmp_second_phone_slash_flage){
        $setvar( 
            ,$($tmp_id).value = $formatstring(###-####-#,$replace(-,,$tmp_keypad_value))
            ,tmp_second_phone_slash_flage = false
        );
    }elseif($tmp_keypad_value_str_len == 9 && !$tmp_second_phone_slash_flage){
        $setvar(
            ,$($tmp_id).value = $formatstring(###-####,$replace(-,,$tmp_keypad_value))
            ,tmp_second_phone_slash_flage = true
        );
    }

"/>
<!-- <action id="fnAccountKeypad_1002_100_confirm"
value="
	$log(최대근**************);
	$setvar( 
		tmp_af_result = $callaction(fnBtnAfConfirmCheck)
		,btn_1002_af.enable = $tmp_af_result
	);

	$closescreen(popscreen_number_keypad);
	if($tmp_af_result){
		$popscreen(popscreen_1002_100_info_open);
	}else{
		return;
	}

"/>
<action id="fnAccountKeypad_1002_100_onunload"
value="
	$setvar( btn_1002_af.enable = $callaction(fnBtnAfConfirmCheck));
"/> -->
<screen id="screen_1002_100"
	class="cs_screen_contents"
	backcolor="ffffff"
	onload="screen_contents_onload"
	onunload="screen_1002_100_onunload"
	noscroll_height="true"
	margin_bottom="$cs_height_20"
>
	<br height="$cs_height_15"/>
	<viewgroup
		width="$this.remain_right"
		height="$cs_height_386"
		margin_left="$cs_width_16"
		margin_right="$cs_width_16"
	>
		<viewgroup
			width="$this.remain_right"
			height="$cs_height_98"
		>
			<label
				width="$cs_width_56"
				height="$cs_height_20"
				fontsize="$cs_fontsize_15"
				fontname="$cs_font_400"
				textcolor="$cs_color_text"
				align="left"
				value="본인인증"
			/>
			<label 
	        	id="img_pop_info_1002" 
	        	width="$cs_height_20"
	        	height="$cs_height_20"
	            BACKGROUNDSVG="$icon_question"
				BACKGROUNDSVG_DISABLE="$icon_question"
				BACKGROUNDSVG_HIGHLIGHT="$icon_question"
				BACKGROUNDSVG_WIDTH="$cs_height_20"
				BACKGROUNDSVG_HEIGHT="$cs_height_20"
				backgroundimage_align="center"
				backgroundimage_align_vertical="center"
				hidden="false"
	        />
			<viewgroup 
				x="$w($g_lcdWidth,0)" 
				width="$w($g_lcdWidth,25)" 
				height="$h($g_lcdHeight,4.5)"
			>
		        <button id="btn_pop_info_1002_100" class="cs_button_none" onClicked="btn_pop_info_1002_100_onClicked"/>
	   		</viewgroup>
	   		<br/>
	   		<viewgroup
	   			width="$this.remain_right"
	   			height="$cs_height_68"
	   			layout_vertical="bottom"
	   		>
	   			<label
	   				width="$this.remain_right"
	   				height="$cs_height_34"
	   				textcolor="$cs_color_black"
	   				fontsize="$cs_fontsize_24"
	   				fontname="$cs_font_600"
	   				value="본인 확인을 위해"
	   			/>
	   			<br/>
	   			<label
	   				width="$this.remain_right"
	   				height="$cs_height_34"
	   				textcolor="$cs_color_black"
	   				fontsize="$cs_fontsize_24"
	   				fontname="$cs_font_600"
	   				value="정보를 입력해 주세요."
	   			/>
	   		</viewgroup>
		</viewgroup>
		<br height="$cs_height_16" />
		<viewgroup
			width="$this.remain_right"
			height="$this.remain_bottom"
		>
			<viewgroup id="vg_1002_100_input_3"
				width="$this.remain_right"
				height="$cs_height_76"
				margin_top="$cs_height_18"
				margin_bottom="$cs_height_18"
				margin_left="$cs_width_20"
				border_radius="$cs_radius_10"
				border_color="$cs_color_line"
				hidden="true"
			>
				<label
					width="$this.remain_right"
					height="$cs_height_14"
					textcolor="$cs_color_text"
					fontsize="$cs_fontsize_12"
					fontname="$cs_font_400"
					value="휴대폰번호"
				/>
				<br height="$cs_height_2" />
				<label id="1002_phone_choice"
					width="$cs_width_100" 
					height="$cs_height_24"
					textcolor="$cs_color_black"
					fontsize="$cs_fontsize_16"
					fontname="$cs_font_400"
					value="통신사"
					key="-1" 
					onclicked="1002_phone_onclicked"
					BACKGROUNDSVG="$icon_polygon_3"
			        BACKGROUNDSVG_DISABLE="$icon_polygon_3"
			        BACKGROUNDSVG_HIGHLIGHT="$icon_polygon_3"
			        BACKGROUNDSVG_WIDTH="$cs_width_10"
			        BACKGROUNDSVG_HEIGHT="$cs_height_8"
			        backgroundimage_align="right"
			        backgroundimage_align_vertical="center"
				/>

				<blank width="$cs_width_10"/>
				<textfield id="tf_1002_confirm_3"
					width="$this.remain_right" 
					height="$cs_height_24"
					keyboard_type="number"
					maxlength="13"
					placeholder="010-1234-5678"
					textcolor_placeholder="$cs_color_disable"
					textcolor="$cs_color_black"
					fontsize="$cs_fontsize_16"
					fontname="$cs_font_400"
					clearbutton="true"
					enable="true"
					onChanged="tf_1002_confirm_3_onChange"
				/>
				<!-- <button class="cs_button_none" 
					x="$tf_1002_confirm_3.x"
					y="$tf_1002_confirm_3.y"
					width="$this.remain_right" 
					height="$cs_height_24"
					onClicked="$callaction(fnAccountShowInputKeypad,tf_1002_confirm_3,phone,fnAccountKeypad_1002_100_confirm,fnAccountKeypad_1002_100_onunload);"
				/> -->
			</viewgroup>
			<br height="$cs_height_20" />
			<viewgroup id="vg_1002_100_input_2"
				width="$this.remain_right"
				height="$cs_height_76"
				margin_top="$cs_height_18"
				margin_bottom="$cs_height_18"
				margin_left="$cs_width_20"
				border_radius="$cs_radius_10"
				border_color="$cs_color_line"
				hidden="true"

				x="$vg_1002_100_input_3.x"
				y="$vg_1002_100_input_3.y"
			>
				<label
					width="$this.remain_right"
					height="$cs_height_14"
					textcolor="$cs_color_text"
					fontsize="$cs_fontsize_12"
					fontname="$cs_font_400"
					value="주민등록번호"
				/>
				<br/>
				<textfield_security id="tf_1002_confirm_2"
					width="$this.remain_right" 
					height="$cs_height_24"
					keyboard_type="number"
					maxlength="13"
					placeholder="주민등록번호 13자리 ‘-’ 없이 입력"
					textcolor_placeholder="$cs_color_disable"
					textcolor="$cs_color_black"
					fontsize="$cs_fontsize_16"
					fontname="$cs_font_400"
					valuevar="g_tf_1002_confirm_2_var"
					valueencvar="g_tf_1002_confirm_2_encvar"
					valuevar_common="true"
					input_type="number"
					align="left"
					returntype="done"
					description="주민등록번호"
					hint="주민등록번호 13자리 ‘-’ 없이 입력"
					onChanged="tf_1002_confirm_2_onchanged"
				/>
			</viewgroup>
			<br height="$cs_height_20" />
			<viewgroup id="vg_1002_100_input_1"
				width="$this.remain_right"
				height="$cs_height_76"
				margin_top="$cs_height_18"
				margin_bottom="$cs_height_18"
				margin_left="$cs_width_20"
				border_radius="$cs_radius_10"
				border_color="$cs_color_line"

				x="$vg_1002_100_input_3.x"
				y="$vg_1002_100_input_3.y"
			>
				<label
					width="$this.remain_right"
					height="$cs_height_14"
					textcolor="$cs_color_text"
					fontsize="$cs_fontsize_12"
					fontname="$cs_font_400"
					value="이름"
				/>
				<br/>
				<textfield id="tf_1002_confirm_1"
					width="$this.remain_right" 
					height="$cs_height_24"
					keyboard_type="text"
					maxlength="10"
					placeholder="이름입력"
					textcolor_placeholder="$cs_color_disable"
					textcolor="$cs_color_black"
					fontsize="$cs_fontsize_16"
					fontname="$cs_font_400"
				/>
			</viewgroup>
		</viewgroup>
	</viewgroup>	
	<br/>
	<viewgroup
		width="$cs_width_343"
		height="$cs_height_54"
		layout="center"
		layout_vertical="bottom"
	>
		<button 
			width="$cs_width_167_5" 
			height="$this.remain_bottom"
			layout="left"
			backcolor="$cs_color_white"
			border_width="1"
			border_radius="$cs_height_10"
			border_color="$cs_color_disable"
			fontsize="$cs_fontsize_16"
			fontname="$cs_font_700"
			textcolor="$cs_color_black"
			textcolor_active="$cs_color_black"
			value="이전"
			onClicked="btn_open_account_history_onClicked"
		/>
		<button id="btn_1002_af"
			width="$cs_width_167_5" 
			height="$this.remain_bottom"
			layout="right"
			backcolor="$cs_color_main"
			backcolor_disable="$cs_color_main_disable"
			border_width="1"
			border_radius="$cs_height_10"
			fontsize="$cs_fontsize_16"
			fontname="$cs_font_700"
			textcolor="$cs_color_white"
			textcolor_active="$cs_color_white"
			textcolor_disable="$cs_color_white"
			value="다음"
			onclicked="$popscreen(popscreen_1002_100_info_open);"
			enable="false"
		/>
	</viewgroup>
</screen>


//통신사 선택 관련
<action id="1002_phone_onclicked" 
value="
	$log(선택:$this.key);
	$popscreen(popscreen_1002_phone_choice);
"/>

<class id="cs_lbl_1002_100_telecom"
width="$this.remain_right"
height="$cs_height_48"
textcolor="$cs_color_black"
fontsize="$cs_fontsize_15"
fontname="$cs_font_400"
onClicked="lbl_1002_100_telecom_onclciked"
/>	

<action id="lbl_1002_100_telecom_onclciked"
value="
	$setvar(
		1002_phone_choice_set_key=$this.key
		,1002_phone_choice_set_val=$this.value
	);

	$setvar(
		1002_phone_select_key=$1002_phone_choice_set_key
		,1002_phone_choice.key=$1002_phone_choice_set_key
		,1002_phone_choice.value=$1002_phone_choice_set_val
	);

	$logvar(
		1002_phone_select_key
		,1002_phone_choice.value
	);
	if($1002_phone_select_key==1){ 		// skt,kt,lg : 1,2,3
		$memcpy(1002_htmldata_phone,1002_htmldata_2);
		$setvar(g_1002_html_phone = 1002_htmldata_2);
	}
	elseif($1002_phone_select_key==2){ 		
		$memcpy(1002_htmldata_phone,1002_htmldata_3);
		$setvar(g_1002_html_phone = 1002_htmldata_3);
	}
	elseif($1002_phone_select_key==3){ 		
		$memcpy(1002_htmldata_phone,1002_htmldata_4);
		$setvar(g_1002_html_phone = 1002_htmldata_4);
	}
	if($1002_phone_select_key==5){ 		// SKT //알뜰폰: 5,6,7
		$memcpy(1002_htmldata_phone,1002_htmldata_2);
		$setvar(g_1002_html_phone = 1002_htmldata_2);
	}
	elseif($1002_phone_select_key==6){ 	// KT
		$memcpy(1002_htmldata_phone,1002_htmldata_3);
		$setvar(g_1002_html_phone = 1002_htmldata_3);
	}
	elseif($1002_phone_select_key==7){ 	// LGU+
		$memcpy(1002_htmldata_phone,1002_htmldata_4);
		$setvar(g_1002_html_phone = 1002_htmldata_4);
	}

	$setvar( btn_1002_af.enable = $callaction(fnBtnAfConfirmCheck));
	$closescreen(popscreen_1002_phone_choice);
	if($1002_phone_choice_set_key != -1 && $strlen($tf_1002_confirm_3.value) <= 0){
		$setvar(tf_1002_confirm_3.focus = true);
	}
"/>

<action id="popscreen_1002_phone_choice_onunload"
value="
"/>
<action id="popscreen_1002_phone_choice_onload"
value="
"/>
<popscreen id="popscreen_1002_phone_choice"
	width="$p_lcdWidth"
	height="$p_lcdHeight"
	backcolor="00000060"
	onload="popscreen_1002_phone_choice_onload"
	onunload="popscreen_1002_phone_choice_onunload"
>
	<screen id="pop_1002_100_1_screen"
		width="$this.remain_right"
		layout="center"
		layout_vertical="bottom"
		height="$cs_height_392"
		background_roundinfo="$cs_color_white,$cs_color_white,$cs_radius_30,1,true,true,false,false"
	>
		<br height="$cs_height_30" />
		<viewgroup
			width="$this.remain_right"
			height="$cs_height_333"
			margin_left="$cs_width_23"
			margin_right="$cs_width_23"
		>
			<label
				width="$this.remain_right"
				height="$cs_height_25"
				textcolor="$cs_color_black"
				fontsize="$cs_fontsize_18"
				fontname="$cs_font_700"
				value="통신사를 선택해주세요"
				onclicked="$closescreen(popscreen_1002_phone_choice);" 
			/>
			<br height="$cs_height_20" />	
			<label
				class="cs_lbl_1002_100_telecom"
				key="1"
				value="SKT"
			/>
			<br/>
			<label
				class="cs_lbl_1002_100_telecom"
				key="2"
				value="KT"
			/>
			<br/>
			<label
				class="cs_lbl_1002_100_telecom"
				key="3"
				value="LG U+"
			/>
			<br/>
			<label
				class="cs_lbl_1002_100_telecom"
				key="5"
				value="SKT 알뜰폰"
			/>
			<br/>
			<label
				class="cs_lbl_1002_100_telecom"
				key="6"
				value="KT 알뜰폰"
			/>
			<br/>
			<label
				class="cs_lbl_1002_100_telecom"
				key="7"
				value="LG U+ 알뜰폰"
			/>
		</viewgroup>
	</screen>
	<br/>
	<label
		x="$result($popscreen_1002_phone_choice.width - $cs_height_50)" 
		y="$result($pop_1002_100_1_screen.y)"
    	width="$cs_height_50"
    	height="$cs_height_50"
        BACKGROUNDSVG="$icon_cancel"
		BACKGROUNDSVG_DISABLE="$icon_cancel"
		BACKGROUNDSVG_HIGHLIGHT="$icon_cancel"
		BACKGROUNDSVG_WIDTH="$cs_height_20"
		BACKGROUNDSVG_HEIGHT="$cs_height_20"	
		backgroundimage_align="center"
		backgroundimage_align_vertical="center"
		onclicked="$closescreen(popscreen_1002_phone_choice);" 
    />
</popscreen>

// 휴대폰 인증번호 전송 이전 약관동의 팝업
<action id="btn_1002_number_bf_onClicked"
value="
	$closescreen(popscreen_1002_100_info_open);
	$popscreen(popscreen_1002_100_telecom_auth_code);
	$callaction(Act_RequestTelecomAuthCodeMts,1);
"/>
<action id="popscreen_1002_100_info_open_onunload"
value="
"/>
<popscreen id="popscreen_1002_100_info_open"
	width="$p_lcdWidth"
	height="$p_lcdHeight"
	backcolor="00000060"
	onload="popscreen_1002_100_info_open_onload"
	onunload="popscreen_1002_100_info_open_onunload"
>
	<screen id="pop_1002_100_info_open_screen"
		width="$this.remain_right"
		layout="center"
		layout_vertical="bottom"
		height="$cs_height_303"
		margin_top="$cs_height_30"
		margin_bottom="$cs_height_20"
		background_roundinfo="$cs_color_white,$cs_color_white,$cs_radius_30,1,true,true,false,false"
	>
		<viewgroup
			width="$this.remain_right"
			height="$cs_height_177"
			margin_left="$cs_width_16"
			margin_right="$cs_width_16"
		>
			<label
				width="$this.remain_right"
				height="$cs_height_25"
				textcolor="$cs_color_black"
				fontsize="$cs_fontsize_18"
				fontname="$cs_font_700"
				value="약관 동의하기"
			/>
			<br/>
			<viewgroup
				width="$this.remain_right"
				height="$cs_height_132"
				layout_vertical="bottom"
				backcolor="$cs_color_bg"
				border_radius="$cs_radius_15"
				margin_left="$cs_width_20"
				margin_right="$cs_width_20"
				margin_top="$cs_height_20"
				margin_bottom="$cs_height_20"
			>
				<checkbox id="chk_1002_100_all"
					width="$this.remain_right"
					height="$cs_height_22"
					fontsize="$cs_fontsize_15"
					fontname="$cs_font_700"
					textcolor="$cs_color_black"
					margin_left="$result($cs_height_22 + $cs_width_10)"
					CHECKIMAGESVG="$icon_checkbox_check_on" 
					UNCHECKIMAGESVG="$icon_checkbox_check_off"
					CHECKIMAGESVG_DISABLE="$icon_checkbox_check_off"
					BACKGROUNDSVG_WIDTH="$cs_height_22"
					BACKGROUNDSVG_HEIGHT="$cs_height_22"
					backgroundimage_align="left"
					backgroundimage_align_vertical="center"
					value="전체 동의하기"
					onClicked="$callaction(chk_1002_100_all_onclicked);"
				/>
				<br height="$cs_height_20" />
				<viewgroup
					width="$this.remain_right"
					height="$cs_height_50"
					margin_left="$cs_width_15"
				>
					<checkbox id="chk_1002_100_1"
						layout_vertical="top"
						width="$this.remain_right"
						height="$cs_height_20"
						fontname="$cs_font_400"
						fontsize="$cs_fontsize_14"
						textcolor="$cs_color_text"
						margin_left="$result($cs_height_20 + $cs_width_10)"
						CHECKIMAGESVG="$icon_checkbox_on" 
						UNCHECKIMAGESVG="$icon_checkbox_off"
						CHECKIMAGESVG_DISABLE="$icon_checkbox_off"
						BACKGROUNDSVG_WIDTH="$cs_height_20"
						BACKGROUNDSVG_HEIGHT="$cs_height_20"
						backgroundimage_align="left"
						backgroundimage_align_vertical="center"
						onClicked="$callaction(btn_essential_1002_100_onClicked,1);"
						key="1"
						value="(필수) 통신사 이용약관 동의"
					/>
					<br/>
					<checkbox id="chk_1002_100_2"
						layout_vertical="bottom"
						width="$this.remain_right"
						height="$cs_height_20"
						fontname="$cs_font_400"
						fontsize="$cs_fontsize_14"
						textcolor="$cs_color_text"
						margin_left="$result($cs_height_20 + $cs_width_10)"
						CHECKIMAGESVG="$icon_checkbox_on" 
						UNCHECKIMAGESVG="$icon_checkbox_off"
						CHECKIMAGESVG_DISABLE="$icon_checkbox_off"
						BACKGROUNDSVG_WIDTH="$cs_height_20"
						BACKGROUNDSVG_HEIGHT="$cs_height_20"
						backgroundimage_align="left"
						backgroundimage_align_vertical="center"
						onClicked="$callaction(btn_essential_1002_100_onClicked,2);"
						key="2"
						value="(필수) 개인(신용)정보의 업무위탁에 관한 사항"
					/>
				</viewgroup>
			</viewgroup>
		</viewgroup>

		<br/>
		<viewgroup
			width="$cs_width_343"
			height="$cs_height_54"
			layout="center"
			layout_vertical="bottom"
		>
			<button id="btn_1002_number_bf"
				width="$this.remain_right"
				height="$this.remain_bottom"
				layout="right"
				backcolor="$cs_color_main"
				backcolor_disable="$cs_color_main_disable"
				border_width="1"
				border_radius="$cs_radius_10"
				fontsize="$cs_fontsize_16"
				fontname="$cs_font_700"
				textcolor="$cs_color_white"
				textcolor_active="$cs_color_white"
				textcolor_disable="$cs_color_white"
				value="인증번호 받을게요"
				enable="false"
				onClicked="btn_1002_number_bf_onClicked"
			/>
		</viewgroup>
	</screen>
	<br/>
	<label
		x="$result($popscreen_1002_100_info_open.width - $cs_height_50)" 
		y="$result($pop_1002_100_info_open_screen.y)"
    	width="$cs_height_50"
    	height="$cs_height_50"
        BACKGROUNDSVG="$icon_cancel"
		BACKGROUNDSVG_DISABLE="$icon_cancel"
		BACKGROUNDSVG_HIGHLIGHT="$icon_cancel"
		BACKGROUNDSVG_WIDTH="$cs_height_20"
		BACKGROUNDSVG_HEIGHT="$cs_height_20"	
		backgroundimage_align="center"
		backgroundimage_align_vertical="center"
		onclicked="$closescreen(popscreen_1002_100_info_open);" 
    />
</popscreen>

<action id="btn_essential_1002_100_onClicked"
params="p_key"
value="
	$log(선택키:$p_key);
	$log(선택동의서 : $vg_1002_100_agree_kind.selectkey );
	$delvar(popscreen_html);
	$setvar(
		,tmp_btn_id			= $addstring(chk_1002_100_,$p_key)
		,popscreen_title 	= $tmp_btn_id.value
		,popscreen_key 		= $p_key
	);


	if($isequal_string($p_key,1)){
		if($isequal_string($g_1002_html_phone,1002_htmldata_2)){
			$setvar( 	html_pop_height = $h($g_lcdHeight,770)	);	
		}
		if($isequal_string($g_1002_html_phone,1002_htmldata_3)){
			$setvar( 	html_pop_height = $h($g_lcdHeight,610)	);
		}
		if($isequal_string($g_1002_html_phone,1002_htmldata_4)){
			$setvar( 	html_pop_height = $h($g_lcdHeight,500)	);
		}
		$setvar(	popscreen_html = $g_1002_html_phone	);
	}
	elseif($isequal_string($p_key,2)){
		$setvar( 	html_pop_height = $h($g_lcdHeight,480)	);
		$setvar(	popscreen_html = 1002_htmldata_5	);
	}

	$popscreen(popscreen_1002_100);
"/>
<action id="fnPopScreen_Close_1002" 
value="
	// 그냥 닫을 때는 동의 체크를 해제한다.
	$setvar(
		tmp_btn_id_agree 	= $addstring(chk_1002_100_,$this.key)
		,$($tmp_btn_id_agree).checked = false
	);

	if(!$chk_1002_100_1.checked
	|| !$chk_1002_100_2.checked
	){
		$setvar(
			,chk_1002_100_all.checked = false
			,btn_1002_number_bf.enable=false
		);
	}

	$closescreen(popscreen_1002_100);
" />
<action id="btn_1002_100_agree_onClicked" 
value="
	$closescreen(popscreen_1002_100);

	$callaction(chk_1002_100_all_onclicked); 		// 필수동의서는 자동으로 띄운다.
"/>
// 인증번호
<action id="chk_1002_100_all_onclicked" 
value="
	// 필수동의서는 자동으로 띄운다.
	$setvar(	
		tmp_isAgree = $callaction(fnAgree_Check_1002_100)	
		,chk_1002_100_all.checked = $tmp_isAgree
	);

	if($tmp_isAgree){
		$setvar(
			btn_1002_number_bf.enable = true
		); 	
		return true;	
	}else{
		return false;
	}
	return;
"/>

<action id="btn_1002_100_agree_bottom_onClicked"
value="
	if($tmp_pop_1002_100_flag){
		$setvar(tmp_this_pos_y_1002 = $screen_html.height , tmp_pop_1002_100_flag = false);
	}
	$setvar(
		,tmp_html_h_1002 = $screen_html.height
		,tmp_end_of_scroll_y_1002 = $result_double($html_pop.height - $screen_html.height)
		,tmp_h_share_1002 = $result_floor($tmp_end_of_scroll_y_1002 / $tmp_html_h_1002,0)
	);
	
	if($tmp_h_share_1002 == 0){
		$setvar(screen_html.scrolloffset_y= $tmp_end_of_scroll_y_1002);
		return;
	}
	for($i = 1; $i <= $tmp_h_share_1002; $i++){
		$setvar(tmp_cal_h_1002 = $result_double($i * $tmp_html_h_1002));
		if($tmp_this_pos_y_1002 < $tmp_cal_h_1002){
			$setvar(screen_html.scrolloffset_y= $tmp_cal_h_1002);
			return;
		}

		if($i == $tmp_h_share_1002){
			$setvar(screen_html.scrolloffset_y= $tmp_end_of_scroll_y_1002);
			return;
		}
	}
"/>
<action id="fnAgree_Check_1002_100" 
value="
	if(!$chk_1002_100_1.checked){
		$setvar(chk_1002_100_1.checked = true);
		$callaction(btn_essential_1002_100_onClicked,1);
		return false;
	}
	elseif(!$chk_1002_100_2.checked){
		$setvar(chk_1002_100_2.checked = true);
		$callaction(btn_essential_1002_100_onClicked,2);
		return false;
	}
	
	$setvar(btn_1002_number_bf.enable = true); 			// 다음버튼 활성화 
	return true;
" />
<action id="ppopscreen_1002_100_onload" 
value="
	$setvar( 
		tmp_pop_1002_100_flag = true
		,tmp_this_pos_y_1002 = 
	);
"/>
<action id="SCREEN_1002_100_SCROLLOFFSET_ACTION" 
params="
p_ctrl_id
,p_pos_x
,p_pos_y
"
value="
	// 스크롤이 제일 끝에 위치하면 활성화 
	$setvar(
		tmp_scroll_gap 		= $result($screen_html.SCROLL_HEIGHT - ($p_pos_y + $screen_html.HEIGHT))
		,tmp_this_pos_y_1002 = $p_pos_y
	);	
	$logvar(tmp_scroll_gap);
	if($tmp_scroll_gap <= 0	){
		$setvar(
			btn_1002_100_agree_bottom.hidden = true
			,btn_1002_100_agree.hidden = false 
		);			

	}
	return;

" />
<popscreen id="popscreen_1002_100"
width="$g_lcdWidth" 
height="$p_lcdHeight"
noscroll_height="true"
onload="ppopscreen_1002_100_onload"
onunload="popscreen_1002_100_onunload"
backcolor="$cs_color_white"
>
	<screen 
	width="$this.remain_right"
	height="$this.remain_bottom"
	backcolor="$cs_color_white"
	margin_bottom="$cs_height_20"
	>
		<viewgroup 
		width="$this.remain_right" 
		height="$cs_height_50"	
		backcolor="$cs_color_white" 
		>
			<label 
			width="$result($this.remain_right - $cs_width_56)"
			height="$this.remain_bottom"
			fontsize="$cs_fontsize_16" 
			fontname="$cs_font_700" 
			align="left"
			margin_left="$cs_width_16" 
			valign="center" 
			textcolor="070A0F"
			value="$popscreen_title"
			/>
			<button 
				width="$cs_width_56"
				height="$this.remain_bottom"
				layout="right" 
				key="$popscreen_key" 
				BACKGROUNDSVG="$icon_cancel_2"
		        BACKGROUNDSVG_DISABLE="$icon_cancel_2"
		        BACKGROUNDSVG_HIGHLIGHT="$icon_cancel_2"
		        BACKGROUNDSVG_WIDTH="$cs_height_24"
		        BACKGROUNDSVG_HEIGHT="$cs_height_24"
		        backgroundimage_align="center"
		        backgroundimage_align_vertical="center"
				onClicked="fnPopScreen_Close_1002"
			/>
		</viewgroup>
		<br/>
		<screen id="screen_html"
		width="$this.remain_right"
		height="$result($this.remain_bottom - $cs_height_74)"
		backcolor="$cs_color_white"
		SCROLLOFFSET_ACTION="screen_1002_100_SCROLLOFFSET_ACTION"
		>
			<htmlview 
			id="html_pop"
			width="$this.remain_right" 
			layout="center"
			height="$this.remain_bottom"
			value_html_var="$popscreen_html"
			fontsize="$cs_fontsize_14"
			textcolor="$cs_color_text"
			backcolor="$cs_color_white"
			lineheight="$cs_height_20"
			margin_left="$cs_width_16"
			margin_right="$cs_width_16"
			margin_top="$cs_height_15"
			margin_bottom="$cs_height_15"
			noscroll_height="true"
			height="$html_pop_height"
			/>
			<label x="$html_pop.x" width="$this.remain_right"  height="$html_pop_height" backcolor="none"/>
		</screen>
		<br/>
		<button id="btn_1002_100_agree"
		layout="center"
		layout_vertical="bottom"
		width="$cs_width_343" 
		height="$cs_height_54" 
		backcolor="$cs_color_main"
		backcolor_active="$cs_color_main"
		border_radius="$cs_radius_10"
		textcolor="$cs_color_white"
		textcolor_active="$cs_color_white"
		fontsize="$cs_fontsize_16"
		fontname="$cs_font_700"

		hidden="true"
		value="확인했고 동의해요" 
		onclicked="btn_1002_100_agree_onClicked" 
		/>
		<button id="btn_1002_100_agree_bottom"
		x="$btn_1002_100_agree.x"
		layout="center"
		layout_vertical="bottom"
		width="$cs_width_343" 
		height="$cs_height_54" 
		backcolor="$cs_color_main"
		backcolor_active="$cs_color_main"
		border_radius="$cs_radius_10"
		textcolor="$cs_color_white"
		textcolor_active="$cs_color_white"
		fontsize="$cs_fontsize_16"
		fontname="$cs_font_700"

		hidden="false"
		value="아래로 내려보기" 
		onclicked="btn_1002_100_agree_bottom_onClicked" 
		/>
	</screen>
</popscreen>

//휴대폰 인증 번호 화면.

<action id="fnAccountKeypad_1002_100_telecom_auth_code_onunload"
value="
	if($strlen($tf_1002_confirm_4.value) == 6 && !$btn_1002_number_bf_resend.enable ){
		$setvar(btn_1002_confirm.enable = true);
	}
"/>
// SMS 인증요청 
<action id="Act_RequestTelecomAuthCodeMts" 
value="
	if($Act_RequestTelecomAuthCodeMts_param1==1){
	}

	$delvar(strRequestData, strRequestDataReal);
    	
	$log(SMS 이름:$tf_1002_confirm_1.value);
	$log(SMS 주민:$g_tf_1002_confirm_2_var);
	$log(SMS 이통사:$1002_phone_select_key);
	$log(SMS 전화번호:$tf_1002_confirm_3.value);

	$addurlparam(strRequestData,name,$tf_1002_confirm_1.value);
	$addurlparam(strRequestData,jumin,$g_tf_1002_confirm_2_var);
	$addurlparam(strRequestData,hp_tp,$1002_phone_select_key);
	$addurlparam(strRequestData,hp_no,$tf_1002_confirm_3.value);

	$KISA_SEED_CBC_ENCRYPT(strRequestData,strRequestDataEnc);

	$addurlparam(strRequestDataReal,q,$strRequestDataEnc);

	$KISA_SEED_CBC_DECRYPT(strRequestDataEnc,strRequestDataDEC);

	$logvar(strRequestDataDEC);

	$setnstimer(TIMER_SMS_INPUT,1,Act_sms_timer,TRUE);

	$setvar(
		,tf_1002_confirm_4.value = 
		,btn_1002_number_bf_resend.enable = false
		,btn_1002_confirm.enable = false
	);

	$getRequestData(VAR_GET_Request,$g_sms_request_url,Act_ResponseTelecomAuthCodeMts,strRequestDataReal,TRUE);	
" />
<action id="Act_ResponseTelecomAuthCodeMts" 
params="result,strVarName,strURL"
value="
	$logvar($strVarName);

	$setvar(jsonName=json_AuthCode);

	$json_create($jsonName);
	$json_parsebuffer($jsonname,$strVarName);
	$json_print($jsonname);

	$setvar(
		json_result 		= $json_getdata($jsonname,result)
		,json_selfAuthReqSeq 	= $json_getdata($jsonname,selfAuthReqSeq)
		,json_selfAuthResSeq 	= $json_getdata($jsonname,selfAuthResSeq)
		,json_errorMsg 		= $json_getdata($jsonname,errorMsg)
	);
	$logvar(
		json_result 		
		,json_selfAuthReqSeq 	
		,json_selfAuthResSeq 	
		,json_errorMsg 		
	);

	$json_delete($jsonName);

	$log(SMS 이름:$tf_1002_confirm_1.value); 
	$log(SMS 이통사:$1002_phone_select_key);
	$log(SMS 전화번호:$tf_1002_confirm_3.value);

	if(!$isequal_string($json_result,success)){
		$closescreen(popscreen_1002_100_telecom_auth_code);
		//$callaction(fnPopover_AlertAction,,$json_errorMsg,,확인);
		$callaction(fnPopover_AlertAction,,일부 정보가 정확하지 않아요.\n입력하신 정보를 다시 확인해주세요.,,확인);
	}
" />
<action id="Act_sms_timer" 
value="
	$setvar(
		tmp_remain_time = $result($lbl_sms_timer.key - 1)
		,tmp_remain_min = $result_floor($tmp_remain_time/60,0)
		,tmp_remain_sec = $result($tmp_remain_time%60)
	);
	if($tmp_remain_time == 0){ 
		$setvar(
			btn_1002_number_bf_resend.enable = true
			,tf_1002_confirm_4.value =
			,btn_1002_confirm.enable = false
		);		
		$stopnstimer(TIMER_SMS_INPUT); 	
	}

	if($tmp_remain_sec < 10){		$setvar(tmp_remain_sec = $addstring(0,$tmp_remain_sec));	}
	$setvar(
		tmp_remain_min_sec = $addstring(0,$tmp_remain_min,:,$tmp_remain_sec)
		,lbl_sms_timer.key = $tmp_remain_time
		,lbl_sms_timer.value = $tmp_remain_min_sec
	);
	$logvar(
		tmp_remain_time 
		,tmp_remain_min 
		,tmp_remain_sec 
		,tmp_remain_min_sec
	);
" />
<action id="btn_1002_confirm_onclicked"
value="
	if($strlen($tf_1002_confirm_4.value)<1){
		$alert(,,인증번호를 입력해주세요.);
		return;
	}
	$callaction(Act_VerifyTelecomAuthCodeMts);
"/>
//인증번호 인증 단계.
<action id="Act_VerifyTelecomAuthCodeMts" 
value="
	$delvar(strVerifyData);

	$addurlparam(strVerifyData,sms_auth_no,$tf_1002_confirm_4.value);
	$addurlparam(strVerifyData,AuthReqSeq,);
	$addurlparam(strVerifyData,selfAuthResSeq,$json_selfAuthResSeq);

    $getRequestData(VAR_GET_Verify,$g_sms_verify_url,Act_VerifyTelecomAuthCodeMts_Response,strVerifyData,TRUE);
" />
//일단 대기.
<action id="Act_VerifyTelecomAuthCodeMts_Response" 
params="result,strVarName,strURL"
value="
	$setvar(jsonName=json_VerifyCode);
	// 복호화 해야 한다.
	$KISA_SEED_CBC_DECRYPT($strVarName,strVarNameDataDEC);
	$logvar($strVarName);
	$logvar(strVarNameDataDEC);

	$json_create($jsonName);
	$json_parsebuffer($jsonname,$strVarNameDataDEC);
	$json_print($jsonname);
	$setvar(
		json_result 					= $json_getdata($jsonname,result)
		,json_errorMsg 					= $json_getdata($jsonname,errorMsg)
		,json_selfAuthReqSeq_confirm 	= $json_getdata($jsonname,selfAuthReqSeq)
		,json_selfAuthResSeq_confirm 	= $json_getdata($jsonname,selfAuthResSeq) 		// 이값으로 확인 비교한다.
	);
	
	$logvar(
		json_result 		
		,json_errorMsg 		
		,json_selfAuthReqSeq_confirm
		,json_selfAuthResSeq_confirm
	);
	$json_delete($jsonName);


	if($isequal_string($json_result,success)){
		if(!$isequal_string($json_selfAuthResSeq, $json_selfAuthResSeq_confirm)){
			$setvar(
				,tf_1002_confirm_4.value =
				,btn_1002_confirm.enable = false
			);
			$callaction(fnPopover_AlertAction,,인증번호가 틀립니다.,,확인);
			return;
		}

		$stopnstimer(TIMER_SMS_INPUT);

		$callaction(fnPopover_AlertAction,fnVerifyTelecomAuthCodeSuccess,본인 인증이 완료 되었어요,,확인);
	}
	else{
		$setvar(
			,tf_1002_confirm_4.value =
			,btn_1002_confirm.enable = false
		);
		$callaction(fnPopover_AlertAction,,$json_errorMsg,,확인);
		return;
	}
" />

<action id="fnVerifyTelecomAuthCodeSuccess"
value="
	$setvar(
		,tf_1002_confirm_1_val = $tf_1002_confirm_1.value 		// 4117_100에서 사용
		//,tf_1002_confirm_2_val = $g_tf_1002_confirm_2_var 	// 4117_100에서 사용안함.
		,tf_1002_confirm_3_val = $replace(-,,$tf_1002_confirm_3.value) 		// 4117_100에서 사용
	);

	$log(주민번호길이:$strlen($g_tf_1002_confirm_2_encvar));
	$log(주민번호길이:$getvarlen(g_tf_1002_confirm_2_encvar));
	$callaction(fnConfig_SetValue,g_IN_AGREE_RMN_NO 	,$g_tf_1002_confirm_2_encvar); 	// 주민번호
	$callaction(fnConfig_SetValue,g_IN_AGREE_CLNT_NM 	,$tf_1002_confirm_1.value);		// 고객명
	$callaction(fnConfig_SetValue,g_IN_REQUEST_TEL_NUM 	,$tf_1002_confirm_3_val);		// 전화번호

	$setvar(
 		,tmp_jumin = $substring($g_tf_1002_confirm_2_var,0,6)
 		,tmp_year_gubun = $substring($g_tf_1002_confirm_2_var,6,1)
 		,tmp_now = $now(yyyyMMdd)
 	);

 	if($tmp_year_gubun > 2){	$setvar(tmp_jumin = $addstring(20,$tmp_jumin));		}
 	else{						$setvar(tmp_jumin = $addstring(19,$tmp_jumin));		}

 	//$logvar(tmp_jumin,tmp_year_gubun,tmp_now);

 	$setvar(
 		tmp_age_man_remain = $result($tmp_now - $tmp_jumin)
 		,tmp_age_man = $substring($tmp_age_man_remain,0,2)
 	);
 	$logvar(
 		tmp_age_man_remain 
 		,tmp_age_man 
 	);
 	$callaction(fnConfig_SetValue,g_IN_REQUEST_AGE 	,$tmp_age_man);		// 만나이

 	if($g_IN_REQUEST_AGE >= 65) {
 		$alert(fnAGEAlertResult,,만 65세 이상의 고령투자자 고객은 비대면 계좌개설을 지원하지 않습니다. 직접 내방을 통해 개설을 부탁드립니다.,확인);
 		return;
 	}
 	$KISA_SEED_CBC_ENCRYPT(g_tf_1002_confirm_2_var,g_tf_1002_confirm_2_kisa_encrypt);
	$callaction(fnSendSSL_MO_AGREE);
"/>
<action id="fnAGEAlertResult" value="
	$closescreen(popscreen_open_account); 	
	$setvar(g_is_open_account =); //로그인화면에서 종료위해 초기화
"/>
//동의서 등록
//수정 [MO_AGREE 연동시에 N_TR값에 Y로 해서 주시면 신규 원장으로 처리 예정입니다.]
<action id="fnSendSSL_MO_AGREE" 
value="
	$popscreen(pop_host_msg,center); 		// 동글뱅이 띄운다.
	$setvar(	
		jsonName 		= MO_AGREE 	
	);
	$logvar(g_IN_AGREE_CLNT_NM,tmp_doc_data);
	$json_create($jsonName);

	$json_setdata($jsonName,,HDR,,{});
	$json_setdata($jsonName,HDR,VER,,1.0); 					// 1.0 : 연동버전
	$json_setdata($jsonName,HDR,CMD,,$jsonName);			// 

	$json_setdata($jsonName,,BODY,,{});
	//$json_setdata($jsonName,BODY,RMN_NO,,$g_IN_AGREE_RMN_NO); 		// 주민번호
	$json_setdata($jsonName,BODY,RMN_NO,,$g_tf_1002_confirm_2_kisa_encrypt); 		// 주민번호
	$json_setdata($jsonName,BODY,CLNT_NM,,$g_IN_AGREE_CLNT_NM); 	// 고객명
	$json_setdata($jsonName,BODY,DOC_ID,,P0001); 						// 문서아이디
	$json_setdata($jsonName,BODY,DOC_DATA,,투자자정보확인서); 						// 입력내용

	$json_setdata($jsonName,BODY,ITEM,,$g_IN_AGREE_ITEM1); 			// 필수동의항목 - YYYY
	$json_setdata($jsonName,BODY,ITEM2,,$g_IN_AGREE_ITEM2); 		// 선택동의항목 - YYY
	$json_setdata($jsonName,BODY,ITEM3,,$g_IN_AGREE_ITEM3); 		// 연락방식 	- * 전체,SMS,전화,이메일,우편:NYYYN
	$json_setdata($jsonName,BODY,IP_ADDR,,0.0.0.0); 						// IP주소

	$json_setdata($jsonName,BODY,MAC_ADDR,,$g_mac_address); 						// 맥어드레스
	$json_setdata($jsonName,BODY,OS_VER,,$g_os_version); 						// OS버전
	

	$json_print($jsonName);
	$delvar(strSSLSendData);
	$json_getfullstring($jsonName,strSSLSendData);
	$json_delete($jsonName);
	$logvar(strSSLSendData);
	$callaction(Act_SSL_SendData,$g_SSLSocketName,strSSLSendData);
"/>
<action id="fnRecvSSL_MO_AGREE" 
value="

	$setvar(
		recvSSL_hdr_ret 		= $json_getdata($jsonname,HDR.RET)
		,recvSSL_hdr_msg 		= $json_getdata($jsonname,HDR.MSG)
		,recvSSL_hdr_err_code	= $json_getdata($jsonname,HDR.ERR_CODE)
		,recvSSL_body_work_no 	= $json_getdata($jsonname,BODY.WORK_NO)

	);
	$setvar(recv_error_msg = $callaction(Act_Error_Message_Account,$recvSSL_hdr_err_code));

	$log(========= SSL 받은데이터 ==============);
	$logvar(
		recvSSL_hdr_ret 
		,recvSSL_hdr_msg 
		,recvSSL_body_work_no 
	);
	if(!$isequal_string($recvSSL_hdr_ret,OK)){
		$closescreen(pop_host_msg); 		// 동글뱅이 멈춤 
		$callaction(fnPopover_AlertAction,,$recvSSL_hdr_msg,,확인); 			
		return;
	}
	$callaction(fnConfig_SetValue,g_OUT_AGREE_WORK_NO 	,$recvSSL_body_work_no);

	// 신용등급 조회
	$callaction(fnSendSSL_MO_CREDIT);
	return;

"/>
<action id="fnSendSSL_MO_CREDIT"
value="	// 비대면 절차개선 - 2020.09.28
		// 신용등급 조회
	$setvar(	
		jsonName 		= MO_CREDIT 	
	);

	$json_create($jsonName);

	$json_setdata($jsonName,,HDR,,{});
	$json_setdata($jsonName,HDR,VER,,1.0); 					// 1.0 : 연동버전
	$json_setdata($jsonName,HDR,CMD,,$jsonName);			// 

	$json_setdata($jsonName,,BODY,,{});
	$json_setdata($jsonName,BODY,RMN_NO,,$g_tf_1002_confirm_2_kisa_encrypt); 	// 주민번호
	$json_setdata($jsonName,BODY,WORK_NO,,$g_OUT_AGREE_WORK_NO); 				// 상담번호
	
	$json_print($jsonName);
	$delvar(strSSLSendData);
	$json_getfullstring($jsonName,strSSLSendData);
	$json_delete($jsonName);
	$logvar(strSSLSendData);
	$callaction(Act_SSL_SendData,$g_SSLSocketName,strSSLSendData);
"/>
<action id="fnRecvSSL_MO_CREDIT" 
value="	// 비대면 절차개선 - 2020.09.28
		// 신용등급 조회
	$setvar(
		recvSSL_hdr_ret 		= $json_getdata($jsonname,HDR.RET)
		,recvSSL_hdr_msg 		= $json_getdata($jsonname,HDR.MSG)
		,recvSSL_hdr_err_code	= $json_getdata($jsonname,HDR.ERR_CODE)
		,recvSSL_body_able_yn 	= $json_getdata($jsonname,BODY.ABLE_YN)			// 계좌개설가능여부 Y/N
		,recvSSL_body_credi_score = $json_getdata($jsonname,BODY.CREDI_SCORE) 	// 신용점수
		,recvSSL_body_credi_grade = $json_getdata($jsonname,BODY.CREDI_GRADE) 	// 신용등급

	);
	$setvar(recv_error_msg = $callaction(Act_Error_Message_Account,$recvSSL_hdr_err_code));

	$log(========= SSL 받은데이터 ==============);
	$logvar(
		recvSSL_hdr_ret 
		,recvSSL_hdr_msg 
		,recvSSL_body_able_yn
		,recvSSL_body_credi_score
		,recvSSL_body_credi_grade
	);
	if(!$isequal_string($recvSSL_hdr_ret,OK)){
		$closescreen(pop_host_msg); 		// 동글뱅이 멈춤 
		$callaction(fnPopover_AlertAction,,$recvSSL_hdr_msg,,확인);
		return;
	}
	

	//여기먼저 확인 필요.
	if(!$isequal_string($recvSSL_body_able_yn,Y)){ 	// 신용등급 확인후 팝업띄움 (서비스 확인필요)
		$closescreen(pop_host_msg);
		$callaction(fnPopover_AlertAction,fnCloseAccountPopUp,귀하의 신용등급이 개설조건에 만족하지 않아 계좌개설이 불가능합니다. 확인버튼을 누르시면 초기화면으로 이동합니다.,,확인);
		return;
	}


	
	if($isequal_string($g_save_tel_num,$tf_1002_confirm_3.value)){
		$setvar(tmp_pop_countinu_flag = true);
	}else{
		$setvar(tmp_pop_countinu_flag = false);
	}

	// 인증 완료된 휴대폰번호 - DB에 저장
	$setvar(tmp_save_tel_num_replace = $replace(-,,$tf_1002_confirm_3.value) );
	$callaction(fnConfig_SetValue,g_save_tel_num,$tmp_save_tel_num_replace);

	$callaction(fnSendSSL_MO_REQVIEW);

"/>
//계좌 개설 신청 내역 조회
<action id="fnSendSSL_MO_REQVIEW" 
value="	
	$setvar(	jsonName 		= MO_REQVIEW 	);
	$json_create($jsonName);

	$json_setdata($jsonName,,HDR,,{});
	$json_setdata($jsonName,HDR,VER,,1.0); 					// 1.0 : 연동버전
	$json_setdata($jsonName,HDR,CMD,,$jsonName);			// 

	$json_setdata($jsonName,,BODY,,{});
	$json_setdata($jsonName,BODY,WORK_NO,,$g_OUT_AGREE_WORK_NO); 	// 상담번호
	$json_setdata($jsonName,BODY,CLNT_NM,,$g_IN_AGREE_CLNT_NM); 	// 고객명 (40이하)
	//$json_setdata($jsonName,BODY,RMN_NO,,$g_IN_AGREE_RMN_NO); 	// 고객 주민등록번호
	$json_setdata($jsonName,BODY,RMN_NO,,$g_tf_1002_confirm_2_kisa_encrypt); 	// 고객 주민등록번호
	

	$json_print($jsonName);
	$delvar(strSSLSendData);
	$json_getfullstring($jsonName,strSSLSendData);
	$json_delete($jsonName);
	$logvar(strSSLSendData);
	$callaction(Act_SSL_SendData,$g_SSLSocketName,strSSLSendData);
" />
<action id="fnRecvSSL_MO_REQVIEW" 
value="
	$setvar(
		recvSSL_hdr_ret 			= $json_getdata($jsonname,HDR.RET)
		,recvSSL_hdr_msg 			= $json_getdata($jsonname,HDR.MSG)
		,recvSSL_body_work_no 		= $json_getdata($jsonname,BODY.WORK_NO)
		,recvSSL_body_resv_stdt 	= $json_getdata($jsonname,BODY.RESV_STDT)
		,recvSSL_body_resv_eddt 	= $json_getdata($jsonname,BODY.RESV_EDDT)
		
	);
	$log(========= SSL 받은데이터 ==============);
	$logvar(
		recvSSL_hdr_ret 			
		,recvSSL_hdr_msg 			
		,recvSSL_body_work_no 		
		,recvSSL_body_resv_stdt 	
		,recvSSL_body_resv_eddt 	
	);
	$setvar(recv_error_msg = $callaction(Act_Error_Message_Account,$recvSSL_hdr_err_code));

	if(!$isequal_string($recvSSL_hdr_ret,OK)){
		$closescreen(pop_host_msg); 		// 동글뱅이 멈춤 
		//$alertaction(,,$recv_error_msg,확인);
		//$callaction(fnPopover_AlertAction,,$recv_error_msg,,확인);
		$callaction(fnPopover_AlertAction,,$recvSSL_hdr_msg,,확인);
		return;
	}
	//$callaction(fnConfig_SetValue,g_open_account_save,2);
	$closescreen(pop_host_msg); 		// 동글뱅이 멈춤
	$log(진행단계:$g_open_account_save);



	$callaction(fnSendSSL_MO_WORKNO);
" />
<action id="fnSendSSL_MO_WORKNO"
value="
	$setvar(	jsonName 		= MO_WORKNO 	);
	$json_create($jsonName);

	$json_setdata($jsonName,,HDR,,{});
	$json_setdata($jsonName,HDR,VER,,1.0); 					// 1.0 : 연동버전
	$json_setdata($jsonName,HDR,CMD,,$jsonName);			// 

	$json_setdata($jsonName,,BODY,,{});
	$json_setdata($jsonName,BODY,WORK_NO,,$g_OUT_AGREE_WORK_NO); 	// 상담번호
	
	$json_print($jsonName);
	$delvar(strSSLSendData);
	$json_getfullstring($jsonName,strSSLSendData);
	$json_delete($jsonName);
	$logvar(strSSLSendData);
	$callaction(Act_SSL_SendData,$g_SSLSocketName,strSSLSendData);
"/>
<action id="fnRecvSSL_MO_WORKNO"
value="
	$setvar(
		recvSSL_hdr_ret 			= $json_getdata($jsonname,HDR.RET)
		,recvSSL_hdr_msg 			= $json_getdata($jsonname,HDR.MSG)
		,recvSSL_body_use_yn		= $json_getdata($jsonname,BODY.USE_YN)
		,recvSSL_body_dt 	= $json_getdata($jsonname,BODY.DT)		
	);
	$log(========= SSL 받은데이터 최대근 ==============);
	$logvar(
		recvSSL_hdr_ret 			
		,recvSSL_hdr_msg 			
		,recvSSL_body_dt 		
	);
	
	if(!$isequal_string($recvSSL_hdr_ret,OK)){
		$closescreen(pop_host_msg); 		// 동글뱅이 멈춤 
		$callaction(fnPopover_AlertAction,,$recvSSL_hdr_msg,,확인);
		return;
	}

	$log(
		확인용 : 
			1001 g_IN_AGREE_ITEM1[$g_IN_AGREE_ITEM1],
			1001 g_IN_AGREE_ITEM2[$g_IN_AGREE_ITEM2],
			1001 g_IN_AGREE_ITEM3[$g_IN_AGREE_ITEM3],
			1002 g_save_tel_num[$g_save_tel_num],
			1002 g_IN_AGREE_RMN_NO[$g_IN_AGREE_RMN_NO],
			1002 g_IN_AGREE_CLNT_NM[$g_IN_AGREE_CLNT_NM],
			1002 g_IN_REQUEST_TEL_NUM[$g_IN_REQUEST_TEL_NUM],
			1002 g_IN_REQUEST_AGE[$g_IN_REQUEST_AGE],
			1002 g_OUT_AGREE_WORK_NO[$g_OUT_AGREE_WORK_NO],
	);


	$log(최대근******** $getdiffday($g_open_account_save_date,$recvSSL_body_dt));




	//이어하기 처음하기 일단 대기 꼭 확인. //수정.
	$closescreen(popscreen_number_keypad);
	$closescreen(popscreen_1002_100_telecom_auth_code);
	$callaction(Act_Open_Account_Move,1003);	// 처음부터 순차진행
	return;

	//저장 화면이 있고, 7일경과가 아니고, 저장화면을 저장한 날짜가 존재하고, 이전 저장되어 있던 전화번호와 현재 인증된 전화번호가 같다면
	//mo_workno 의 flag값은 4101에서 휴대폰 인증전에 이미 한번 확인이 되기에
	if($g_open_account_save > 1 
		&& $getdiffday($g_open_account_save_date,$recvSSL_body_dt) <= 8
		&& $strlen($g_open_account_save_date) > 1
		&& $tmp_pop_countinu_flag
		&& $isequal_string($recvSSL_body_use_yn,Y)
	)
	{
		$callaction(Act_Open_Account_Move,4103);	// 이어하기,처음부터 선택화면으로..
	}
	else{							// 진행중인 내역이 없을경우
		// 비대면 절차개선 - 2020.09.28
		// =========== 저장한 전역변수들 초기화 ===========
		$callaction(fnConfig_SetValue,g_save_acno,);
		$callaction(fnConfig_SetValue,g_save_cybr_acct_no,);
		$callaction(fnConfig_SetValue,g_save_acno2,);
		$callaction(fnConfig_SetValue,g_save_cybr_acct_no2,);
		$callaction(fnConfig_SetValue,g_save_acno3,);
		$callaction(fnConfig_SetValue,g_save_hts_id,);
		$callaction(fnConfig_SetValue,g_save_qustion_1,);
		$callaction(fnConfig_SetValue,g_save_qustion_2,);

		$callaction(fnConfig_SetValue,g_open_tp_select,);		// 국내,해외 구분
		$callaction(fnConfig_SetValue,g_save_bank_code,);		// 은행코드
		$callaction(fnConfig_SetValue,g_save_bank_name,);		// 은행명
		$callaction(fnConfig_SetValue,g_save_acnt_name,);		// 계좌명
		$callaction(fnConfig_SetValue,g_save_acnt_no,);			// 계좌번호
		$callaction(fnConfig_SetValue,g_IN_REQUEST_NEW_PW,);	// 계좌비밀번호
		//$callaction(fnConfig_SetValue,g_save_tel_num,);			// 전화번호 >> 인증후 조회한 데이터 살아있어야함
		$callaction(fnConfig_SetValue,g_save_members_nm,);			// 추천직원 이름
		$callaction(fnConfig_SetValue,g_save_members_no,);			// 추천직원 사번
		$callaction(fnConfig_SetValue,g_save_frontImageEncryptData_base64,); 	// 신분증 이미지 바이너리

		$callaction(fnConfig_SetValue,g_save_bsns_date,);			// 거래일자
		$callaction(fnConfig_SetValue,g_save_inout_no,);			// 입출금번호
		$callaction(fnConfig_SetValue,g_save_mast_acctno,);			// 대표계좌번호
		
		$callaction(fnConfig_SetValue,g_save_open_tp,);			// 인증방법 
		$callaction(fnConfig_SetValue,g_save_result_yn,);		// 진위여부
		//$callaction(fnConfig_SetValue,g_OUT_AGREE_WORK_NO,);			// 상담번호 >> 인증후 조회한 데이터 살아있어야함
		
		//$callaction(fnConfig_SetValue,g_open_account_save,); 			// 마지막 화면번호
		//$callaction(fnConfig_SetValue,g_menu_code_open_account,); 		// 마지막 화면번호

		$callaction(fnConfig_SetValue,g_open_account_save_date,); 		
		// ==========================================

		$callaction(Act_Open_Account_Move,4117);	// 처음부터 순차진행
	}
"/>
//재전송
<action id="btn_1002_number_bf_resend_onclicked"
value="
	$setvar(lbl_sms_timer.key = 300);
	$callaction(Act_RequestTelecomAuthCodeMts);
"/>
<action id="popscreen_1002_100_telecom_auth_code_onunload"
value="
	$stopnstimer(TIMER_SMS_INPUT); 
"/>
//SMS recev Android만 가능.
<action id="P_SMS_RECEV_ACTION" scope="common"
params="p_contents"
value="
    //$log(받은 메세지 : $p_contents);
    if($strlen($p_contents) == 6 && !$btn_1002_number_bf_resend.enable){
    	$setvar(
    		tf_1002_confirm_4.value = $p_contents
    		,btn_1002_confirm.enable = true
    	);
    }
" />
<popscreen id="popscreen_1002_100_telecom_auth_code"
	width="$g_lcdWidth" 
	height="$p_lcdHeight"
	noscroll_height="true"
	onload="popscreen_1002_100_telecom_auth_code_onload"
	onunload="popscreen_1002_100_telecom_auth_code_onunload"
	backcolor="ffffff00"
>
	<viewgroup 
        width="$super.width" height="$h($g_lcdHeight,6.2)" backcolor="ffffff00"  
        margin_left="$w($g_lcdwidth,4.3)"
        >
        <viewgroup 
        	width="$w($g_lcdWidth,12.4)" 
        	height="$this.remain_bottom" 
        	hidden="false"
        >
            <label 
	            layout_vertical="center" 
	            width="$cs_height_24"
	            height="$cs_height_24" 
	            BACKGROUNDSVG="$icon_arrow_left"
	            BACKGROUNDSVG_DISABLE="$icon_arrow_left"
	            BACKGROUNDSVG_HIGHLIGHT="$icon_arrow_left"
	            BACKGROUNDSVG_WIDTH="$cs_height_24"
	            BACKGROUNDSVG_HEIGHT="$cs_height_24"
	            backgroundimage_align="center"
	            backgroundimage_align_vertical="center"
            />
            <button class="cs_button_none" 
            	onClicked="$closescreen(popscreen_1002_100_telecom_auth_code);" 
            />
        </viewgroup>
    </viewgroup>
    <br/>
	<viewgroup
		noscroll_height="true"
		margin_bottom="$cs_height_20"
		backcolor="$cs_color_white"
	>
		<br height="$cs_height_15"/>
		<viewgroup
			width="$this.remain_right"
			height="$cs_height_352"
			margin_left="$cs_width_16"
			margin_right="$cs_width_16"
		>
			<viewgroup
				width="$this.remain_right"
				height="$cs_height_98"
			>
				<label
					width="$cs_width_56"
					height="$cs_height_20"
					fontsize="$cs_fontsize_15"
					fontname="$cs_font_400"
					textcolor="$cs_color_text"
					align="left"
					value="본인인증"
				/>
				<label 
		        	width="$cs_height_20"
		        	height="$cs_height_20"
		            BACKGROUNDSVG="$icon_question"
					BACKGROUNDSVG_DISABLE="$icon_question"
					BACKGROUNDSVG_HIGHLIGHT="$icon_question"
					BACKGROUNDSVG_WIDTH="$cs_height_20"
					BACKGROUNDSVG_HEIGHT="$cs_height_20"
					backgroundimage_align="center"
					backgroundimage_align_vertical="center"
					hidden="false"
		        />
				<viewgroup 
					x="$w($g_lcdWidth,0)" 
					width="$w($g_lcdWidth,25)" 
					height="$h($g_lcdHeight,4.5)"
				>
			        <button class="cs_button_none" onClicked="btn_pop_info_1002_100_onClicked"/>
		   		</viewgroup>
		   		<br/>
		   		<viewgroup
		   			width="$this.remain_right"
		   			height="$cs_height_68"
		   			layout_vertical="bottom"
		   		>
		   			<label
		   				width="$this.remain_right"
		   				height="$cs_height_34"
		   				textcolor="$cs_color_black"
		   				fontsize="$cs_fontsize_24"
		   				fontname="$cs_font_600"
		   				value="본인 확인을 위해"
		   			/>
		   			<br/>
		   			<label
		   				width="$this.remain_right"
		   				height="$cs_height_34"
		   				textcolor="$cs_color_black"
		   				fontsize="$cs_fontsize_24"
		   				fontname="$cs_font_600"
		   				value="정보를 입력해 주세요."
		   			/>
		   		</viewgroup>
			</viewgroup>
			<br height="$cs_height_16" />
			<viewgroup
				width="$this.remain_right"
				height="$this.remain_bottom"
			>
				<viewgroup
					width="$this.remain_right"
					height="$cs_height_84"
					margin_top="$cs_height_18"
					margin_bottom="$cs_height_18"
					margin_left="$cs_width_20"
					margin_right="$cs_width_20"
					border_radius="$cs_radius_10"
					border_color="$cs_color_line"
				>
					<label
						width="$this.remain_right"
						height="$cs_height_24"
						textcolor="$cs_color_text"
						fontsize="$cs_fontsize_12"
						fontname="$cs_font_400"
						value="인증번호"
					/>
					<br/>
					<textfield id="tf_1002_confirm_4"
						width="$cs_width_159"
						height="$cs_height_24"
						keyboard_type="number"
						maxlength="6"
						textcolor="$cs_color_black"
						textcolor_placeholder="$cs_color_disable"
						fontsize="$cs_fontsize_18"
						fontsize_placeholder="$cs_fontsize_14"
						fontname="$cs_font_400"
						placeholder="인증번호"
						enable="true"
					/>
					<!-- <button class="cs_button_none" 
					x="$tf_1002_confirm_4.x"
					y="$tf_1002_confirm_4.y"
					width="$cs_width_159"
					height="$cs_height_24"
					onClicked="$callaction(fnAccountShowInputKeypad,tf_1002_confirm_4,authcode,btn_1002_confirm_onclicked,fnAccountKeypad_1002_100_telecom_auth_code_onunload);"
					/> -->

					<label id="lbl_sms_timer"
						width="$cs_width_90"
						height="$cs_height_24"
						textcolor="$cs_color_main"
						fontsize="$cs_fontsize_16"
						fontname="$cs_font_400"
						align="right"
						key="300"
						value="05:00"
					/>
					<blank width="$cs_width_6" />
					<button id="btn_1002_number_bf_resend"
						width="$this.remain_right"
						height="$cs_height_24"
						textcolor="$cs_color_white"
						textcolor_active="$cs_color_white"
						textcolor_disable="$cs_color_white"
						fontsize="$cs_fontsize_13"
						fontname="$cs_font_400"
						align="center"
						value="재전송"
						backcolor="$cs_color_main"
						backcolor_active="$cs_color_main"
						backcolor_disable="$cs_color_main_disable"
						border_radius="$cs_radius_10"
						enable="false"
						onclicked="btn_1002_number_bf_resend_onclicked" 
					/>

				</viewgroup>
				<br height="$cs_height_10" />
				<label
					width="$cs_width_13"
					height="$cs_height_44"
					BACKGROUNDSVG="$icon_rectangle_230"
			        BACKGROUNDSVG_DISABLE="$icon_rectangle_230"
			        BACKGROUNDSVG_HIGHLIGHT="$icon_rectangle_230"
			        BACKGROUNDSVG_WIDTH="$cs_height_4"
			        BACKGROUNDSVG_HEIGHT="$cs_height_4"
			        backgroundimage_x="$cs_width_2"
   					backgroundimage_y="$cs_height_9"
			        //backgroundimage_align="center"
			        //backgroundimage_align_vertical="center"
				/>
				<viewgroup
					width="$this.remain_right"
					height="$cs_height_44"
				>
					<label
						width="$this.remain_right"
						height="$cs_height_22"
						textcolor="$cs_color_text"
						fontsize="$cs_fontsize_14"
						fontname="$cs_font_400"
						value="인증번호 수신이 안될 경우, 인증번호 문자가"
					/>
					<br/>
					<label
						width="$this.remain_right"
						height="$this.remain_bottom"
						textcolor="$cs_color_text"
						fontsize="$cs_fontsize_14"
						fontname="$cs_font_400"
						value="차단되어 있는지 확인하여 주세요."
					/>
				</viewgroup>
				<br/>
				<viewgroup
					width="$this.remain_right"
					height="$cs_height_76"
					margin_top="$cs_height_18"
					margin_bottom="$cs_height_18"
					margin_left="$cs_width_20"
					border_radius="$cs_radius_10"
					border_color="$cs_color_line"
					layout_vertical="bottom"
				>
					<label
						width="$this.remain_right"
						height="$cs_height_14"
						textcolor="$cs_color_text"
						fontsize="$cs_fontsize_12"
						fontname="$cs_font_400"
						value="휴대폰번호"
					/>
					<br height="$cs_height_2" />
					<label
						width="$cs_width_100" 
						height="$cs_height_24"
						textcolor="$cs_color_black"
						fontsize="$cs_fontsize_16"
						fontname="$cs_font_400"
						value="$1002_phone_choice_set_val"
						//key="-1" 
						//onclicked="1002_phone_onclicked"
						BACKGROUNDSVG="$icon_polygon_3"
				        BACKGROUNDSVG_DISABLE="$icon_polygon_3"
				        BACKGROUNDSVG_HIGHLIGHT="$icon_polygon_3"
				        BACKGROUNDSVG_WIDTH="$cs_width_10"
				        BACKGROUNDSVG_HEIGHT="$cs_height_8"
				        backgroundimage_align="right"
				        backgroundimage_align_vertical="center"
					/>

					<blank width="$cs_width_10"/>
					<textfield
						width="$this.remain_right" 
						height="$cs_height_24"
						keyboard_type="number"
						maxlength="13"
						placeholder="010-1234-5678"
						textcolor_placeholder="$cs_color_disable"
						textcolor="$cs_color_black"
						fontsize="$cs_fontsize_16"
						fontname="$cs_font_400"
						clearbutton="true"
						enable="false"
						value="$tf_1002_confirm_3.value"
					/>
				</viewgroup>
			</viewgroup>
		</viewgroup>	
		<br/>
		<viewgroup
			width="$cs_width_343"
			height="$cs_height_54"
			layout="center"
			layout_vertical="bottom"
		>
			<button 
				width="$cs_width_167_5" 
				height="$this.remain_bottom"
				layout="left"
				backcolor="$cs_color_white"
				border_width="1"
				border_radius="$cs_height_10"
				border_color="$cs_color_disable"
				fontsize="$cs_fontsize_16"
				fontname="$cs_font_700"
				textcolor="$cs_color_black"
				textcolor_active="$cs_color_black"
				value="이전"
				onClicked="$closescreen(popscreen_1002_100_telecom_auth_code);"
			/>
			<button id="btn_1002_confirm"
				width="$cs_width_167_5" 
				height="$this.remain_bottom"
				layout="right"
				backcolor="$cs_color_main"
				backcolor_disable="$cs_color_main_disable"
				border_width="1"
				border_radius="$cs_height_10"
				fontsize="$cs_fontsize_16"
				fontname="$cs_font_700"
				textcolor="$cs_color_white"
				textcolor_active="$cs_color_white"
				textcolor_disable="$cs_color_white"
				value="완료"
				enable="false"
				onclicked="btn_1002_confirm_onclicked"
			/>
		</viewgroup>
	</viewgroup>
</popscreen>


<popscreen id="pop_caution"
	width="$g_lcdWidth" 
	height="$g_lcdHeight"
	//backcolor="0000ff"
	modal="true"
	modalbackcolor="#00000088"
	layout="center"
	layout_vertical="center"
	onload=""
	onclicked="$closescreen(pop_caution);"
	key=""
	>
	<screen id="screen_comboAccountPopover"
		width="$w($g_lcdWidth,88.3)"
		//height="$h($g_lcdHeight,70)"
		height="$h($g_lcdHeight,49.5)"
		backcolor="none"
		layout="center"
		layout_vertical="center"
		noscroll_width="true"
		>
		<viewgroup 
			width="$super.width"
			height="$h($g_lcdHeight,8.6)"
			backcolor="ffffff"
			>
			<label width="$super.width" height="$super.height" align="left" margin_left="$w($g_lcdWidth,3.2)" 
			fontname="$g_baseFontNameBold"
			fontsize="$g_fontsize_big2"
			value="알림" />
		</viewgroup>
		<br/><hr backcolor="3c3c3c" /><br/>
		<viewgroup 
			width="$super.width"
			//height="$h($g_lcdHeight,49)"
			height="$h($g_lcdHeight,15)"
			backcolor="ffffff"
			>
			<viewgroup
				width="$super.width"
				height="$h($g_lcdHeight,20)"
				>
				<br height="$h($g_lcdHeight,2)" /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					value="귀하의 신용등급이 개설조건에" />
				<br /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName"
					fontsize="$g_fontSize_big1"
					value="만족하지 않아 계좌개설이 불가능합니다." />    
				<br /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName"
					fontsize="$g_fontSize_big1"
					value="확인버튼을 누르시면 초기화면으로 이동합니다." />
			</viewgroup>
		</viewgroup>
		<br />
		<viewgroup height="$h($g_lcdHeight,10)">
			<button 
				width="100%" 
				height="$super.height" 
				value="확인" 
				backcolor="bd3135"
				backcolor_active="b8240c"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="ffffff"
				textcolor_active="ffffff"
				onclicked="$closescreen(pop_caution);
				$closescreen(popscreen_open_account);
				"
				/>
		</viewgroup>
	</screen>
</popscreen>

//textfield_security 는 textFieldEnd_local를 호출하지 않는다.
<action id="tf_1002_confirm_2_onchanged" value="
	//데이터 확인.
	//$logvar(g_tf_1002_confirm_2_var,g_tf_1002_confirm_2_encvar);
	$setvar( btn_1002_af.enable = $callaction(fnBtnAfConfirmCheck));
	if($strlen($g_tf_1002_confirm_2_var) > 0
	&& $vg_1002_100_input_3.hidden
	){
		$setvar(
			,vg_1002_100_input_2.y = $vg_1002_100_input_1.y

			,vg_1002_100_input_1.y = $result($vg_1002_100_input_1.y + $cs_height_76 + $cs_height_20)

			,vg_1002_100_input_3.hidden = false
		);
		$callaction(1002_phone_onclicked);
	}
"/>
<action id="textFieldEnd_local" value="
	$setvar( 
		tmp_textFieldEnd_local_result = $callaction(fnBtnAfConfirmCheck)
		,btn_1002_af.enable = $tmp_textFieldEnd_local_result
	);

    if($isequal_string($TEXTFIELDEND_LOCAL_PARAM1,tf_1002_confirm_1)){
    	if($strlen($tf_1002_confirm_1.value) > 0 
    	&& $vg_1002_100_input_2.hidden
    	&& $vg_1002_100_input_3.hidden
    	){
    		$setvar(
    			,vg_1002_100_input_1.y = $result($vg_1002_100_input_1.y + $cs_height_76 + $cs_height_20)
    			,vg_1002_100_input_2.hidden = false
    			,tf_1002_confirm_2.focus = true
    		);
    	}
    }

    if($isequal_string($TEXTFIELDEND_LOCAL_PARAM1,tf_1002_confirm_3)){
    	if($strlen($tf_1002_confirm_3.value) > 0){
    		$closescreen(popscreen_number_keypad);
			if($tmp_textFieldEnd_local_result){
				$popscreen(popscreen_1002_100_info_open);
			}else{
				return;
			}
    	}
    }

    if($isequal_string($TEXTFIELDEND_LOCAL_PARAM1,tf_1002_confirm_4)){
    	if($strlen($tf_1002_confirm_4.value) == 6 && !$btn_1002_number_bf_resend.enable ){
			$setvar(btn_1002_confirm.enable = true);
			$callaction(btn_1002_confirm_onclicked);
		}else{
			$setvar(btn_1002_confirm.enable = false);
		}
    }
" />