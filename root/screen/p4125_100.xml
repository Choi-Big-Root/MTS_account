<?xml version="1.0" encoding="UTF-8"?>
<br/>
<!--
 *********************************************************************************
 **
 ** 화면을 그린 후에 필요한 작업을 한다. 
 ** - TR을 배열에 담는다. 전송은 특이한 경우가 아니면 basescreen에서 일괄적으로 전송한다.
 **
 *********************************************************************************
 -->

 <class id="css_4125_td_combo" 
	width="$super.width"
	height="$super.height" 
	align="center"
	fontsize="$g_fontSize_basic" 
	fontname="$g_baseFontName"
	textcolor="bbbbbb"
	textcolor_active="222222"
/>
 <action id="screen_contents_onload" value="
	$setvar(
		,img_step_1.hidden=false
		,img_step_2.hidden=false
		,img_step_3.hidden=false
		,img_step_4.hidden=false
		,img_step_5.hidden=false
		,img_step_6.hidden=false
		,img_step_7.hidden=true
		,img_step_8.hidden=true
		,lbl_open_account_title.x=$w($g_lcdwidth,4.6) // 순서대로 오지 않을경우에 치우친다.
		,lbl_account_title_step_1.hidden=true
		,lbl_account_title_step_2.hidden=true
		,lbl_account_title_step_3.hidden=true
		,lbl_account_title_step_4.hidden=true
		,lbl_account_title_step_5.hidden=true
		,lbl_account_title_step_6.hidden=true
		,lbl_account_title_step_7.hidden=false
		,lbl_account_title_step_8.hidden=false
		,lbl_account_title_step_7.textcolor=ffffff
		,lbl_account_title_step_8.textcolor=777777
		,vg_account_title_step.hidden=false
		,popscreen_open_account_history.hidden=true
		,popscreen_open_account_history_2.hidden=true
		,popscreen_open_account_confirm.hidden=false
		,popscreen_open_account_confirm.x=$w($g_lcdwidth,28)
		,menu_num=4125
	);		
	//$setControlHidden(img_step_5,false);
	//$setControlHidden(img_step_6,true);
	//$setControlHidden(lbl_account_title_step_5,true);
	//$setControlHidden(lbl_account_title_step_6,false);
	//$setControlHidden(popscreen_open_account_history,true);
	//$setControlHidden(popscreen_open_account_history_2,true);
	//$setControlHidden(popscreen_open_account_confirm,false);
		
	
	$removefile($frontImageName);
	//if($isAutoShooting()){
	//	//$alertaction(4125_camera_Shooting,,자동촬영 하시겠습니까?,아니요,예);
	//	$callaction(fnPopover_AlertAction,4125_camera_Shooting,자동촬영 하시겠습니까?,아니요,예);
	//}else{
		$callaction(4125_camera_Shooting);
	//} 

"/>

<action id="4125_camera_Shooting" value="
	$setvar(tmp_result_N_count = ); 
    $removefile($frontImageName);
    $clearCamera();
    $delvar_common(utf8_JuminNumber); 	// common으로 반환됨
	$delvar_common(utf8_IssueDate);		// common으로 반환됨
	$delvar_common(utf8_LicenceNumber);	// common으로 반환됨

	if($4125_camera_Shooting_param1==1){	$setvar(auto_shooting=true);	}
	else{									$setvar(auto_shooting=false);	}
	// startCamera : 액션명, 자동촬영여부($isAutoShooting()), 마스킹여부, 뒷명촬영여부, 테스트카메라모드 
	//$startCamera(camera_callback,$auto_shooting,true,false,true);
    $startCamera(camera_callback,false,true,false,true);
"/>
<action id="camera_callback" 
params="result" 
value="
	if($result == 0) {
		$alert(,인식을 실패하였습니다.);
		$clearCamera();
		$delvar_common(utf8_JuminNumber); 	// common으로 반환됨
		$delvar_common(utf8_IssueDate);		// common으로 반환됨
		$delvar_common(utf8_LicenceNumber);	// common으로 반환됨
		return;
	}
	elseif($result == -2) {
		$alert(,인식 타입이 불분명합니다.);
		$clearCamera();
		$delvar_common(utf8_JuminNumber); 	// common으로 반환됨
		$delvar_common(utf8_IssueDate);		// common으로 반환됨
		$delvar_common(utf8_LicenceNumber);	// common으로 반환됨
		return;
	}
	elseif($result == -1) {
		$alert(,촬영이 취소되었습니다.);
		$delvar_common(utf8_JuminNumber); 	// common으로 반환됨
		$delvar_common(utf8_IssueDate);		// common으로 반환됨
		$delvar_common(utf8_LicenceNumber);	// common으로 반환됨
		$clearCamera();
		return;
	}
	$popscreen(pop_image_process);
	$callaction(call_pop_image_process);
"/>

<action id="call_pop_image_process" value="
	// 신분증타입(1:주민등록증, 2:운전면허증, 그외), 이름, 주민번호, 발급일자, 면허번호, 주소, 발급처
    // local의 경우 두개가 저장됨 m_pBar, m_pLocal
    $getCameraValue(
        strType, strName, strJuminNumber, strIssueDate, strLicenceNumber, strAddress, strIssueOffice,, common,
        viewJuminNumber, viewIssueDate, viewLicenceNumber
    );
	$getCameraImageData(frontImageEncryptData,,photoImageEncryptData,frontImageData,,photoImageData,local);

	$clearCamera();
	$delvar_common(utf8_JuminNumber); 	// common으로 반환됨
	$delvar_common(utf8_IssueDate);		// common으로 반환됨
	$delvar_common(utf8_LicenceNumber);	// common으로 반환됨

	if($strlen($strType) <  1){		$setvar(strType = 1);		}

	if(	$isequal_string($strType,1) ){			// 주민등록증 
		$setvar(
			,lbl_4125_LicenceNumber.hidden 	= true 
			,tf_4125_LicenceNumber.hidden 	= true 
			,lbl_4125_SecuritySerial.hidden = true 
			//,tf_4125_SecuritySerial.hidden 	= true 

			,tf_4125_name.value 			= $strName 					// 이름
			,tf_4125_jumin.value 			= $viewJuminNumber 			// 주민번호 (마스킹 O) 
			,tf_4125_date.value 			= $viewIssueDate 			// 발급일자 (마스킹 O)
			
		);
		$delvar_all(viewJuminNumber);
		$callaction(fnConfig_SetValue,g_IN_REQUEST_IDCARD_TYPE 	,ID01);
	}
	elseif($isequal_string($strType,2)){ 		// 운전면허증
		$setvar(
			,lbl_4125_LicenceNumber.hidden 	= false 
			,tf_4125_LicenceNumber.hidden 	= false 
			,lbl_4125_SecuritySerial.hidden = false 
			//,tf_4125_SecuritySerial.hidden 	= false 

			,tf_4125_name.value 			= $strName 					// 이름
			,tf_4125_jumin.value 			= $viewJuminNumber 			// 주민번호 (마스킹 O)
			,tf_4125_date.value 			= $viewIssueDate 			// 발급일자 (마스킹 O)
			//,tf_4125_SecuritySerial.value 	= $strSecuritySerial 		// 암호일련번호 (마스킹 X)
			,tf_4125_LicenceNumber.value 	= $viewLicenceNumber 		// 면허번호 (마스킹 O)
			
		);
        $delvar_all(viewJuminNumber);
		$callaction(fnConfig_SetValue,g_IN_REQUEST_IDCARD_TYPE 	,ID02);
	}
	// 이미지 파일 저장 - ACCOUNT_PHOTO 에서 사용하기 위해 
	$setvar( frontImageName = frontImageFile.png );
    $removefile($frontImageName);
	$writefile($frontImageName,frontImageData);
	$delvar(frontImageData);
	$log(************ frontImageData  ****);
	//$logvar(frontImageData);
    $clearcontrol(frontImage);
	$changescreen_parse(screen_4125_100_photo,subscreen_4125_100);


	$base64_encode(frontImageEncryptData,frontImageEncryptData_base64);
	$callaction(fnConfig_SetValue,g_save_frontImageEncryptData_base64,$frontImageEncryptData_base64);

	$closescreen(pop_image_process);
	$popscreen(pop_caution4);
"/>


<action id="screen_contents_onunload_4125" 
value="
	$setvar(frontImage.SRCCLEAR = true); 		// 아이폰 이미지 초기화를 위해 사용 
	$setvar(tmp_result_N_count = );
    $delvar_all(
        strType, strName, strJuminNumber, strIssueDate, strLicenceNumber, strAddress, strIssueOffice, strSecuritySerial, common,
        viewJuminNumber, viewIssueDate, viewLicenceNumber
    );
    $setvar(
        tf_4125_jumin.value = 000000 - 0000000
    );
    

	$delvar_common(strType, strName, strJuminNumber, strIssueDate, strLicenceNumber, strAddress, strIssueOffice, strSecuritySerial, viewJuminNumber, viewIssueDate, viewLicenceNumber);
	$delvar(strType, strName, strJuminNumber, strIssueDate, strLicenceNumber, strAddress, strIssueOffice, strSecuritySerial, viewJuminNumber, viewIssueDate, viewLicenceNumber);

	$delvar_common(g_IN_REQUEST_RMN_NO,g_IN_REQUEST_RMN_DATE,g_IN_REQUEST_DRV_NO,g_IN_REQUEST_DRV_CODE);
	$delvar(g_save_jumin, g_save_ID01_1, g_save_ID02_1, g_save_ID02_2);
	$delvar(g_tf_4125_3_var);
	
	$json_delete(ALLFREE);
	$clearCamera();
	$delvar_common(utf8_JuminNumber); 	// common으로 반환됨
	$delvar_common(utf8_IssueDate);		// common으로 반환됨
	$delvar_common(utf8_LicenceNumber);	// common으로 반환됨

	$delvar(frontImageEncryptData, photoImageEncryptData, frontImageData, photoImageData);
	$delvar( frontImageEncryptData_base64);

	if($isequal_string($g_dev_flag,true)){ 	// 다른 화면에서 사용중이나 금결원 때문에
		$callaction(fnConfig_SetValue,g_save_frontImageEncryptData_base64,); 	// 신분증 이미지 바이너리 초기화
		$log(imgageSize g_save_frontImageEncryptData_base64 : [$getvarlen(g_save_frontImageEncryptData_base64)]);
	}

	$removefile($frontImageName);
	$delvar(frontImageData);


" />
<action id="subscreen_4125_100_onunload" 
value="
	$delvar(frontImageData);
"/>
<action id="subscreen_4125_100_onload"
value="
    $reloadcontrol(frontImage);
"/>

<screen id="screen_4125_100"
	class="cs_screen_contents"
	backcolor="f1f1f1"
	onload="screen_contents_onload"
	onunload="screen_contents_onunload_4125"
	>

	<screen id="screen_4125_100"
	backcolor="f1f1f1"
	>
		<screen id="screen_4125_100_photo"
		width="$super.width"
		height="$h($g_lcdHeight,34)"
		>
			<subscreen
			id="subscreen_4125_100"
			width="$super.width"
			height="$h($g_lcdHeight,34)"
            onload="subscreen_4125_100_onload"
			onunload="subscreen_4125_100_onunload"
			>
                <ACCOUNT_PHOTO
                id="frontImage"
                width="$w($g_lcdwidth,80)"
                height="$h($g_lcdHeight,30)"
                backcolor="00ff00"
                layout="center"
                layout_vertical="center"
                border_width="$g_roundHeight"
                border_color="dddfe0"
				imagesizefit="false"
                filename="$frontImageName"
                />
			</subscreen>
		</screen>
		<br />
		<viewgroup
			height="$h($g_lcdHeight,10)" 
			backcolor="f1f1f1"
			>
			<button 
			id="btn_4125_100_1"
			layout="center"
			layout_vertical="top"
			width="$w($g_lcdwidth,80)" 
			height="$h($g_lcdHeight,8)" 
			border_radius="$w($g_lcdWidth,0.5)"
			backcolor="e33433"
			border_width="$g_roundHeight"
			value="신분증 재촬영" 
			textcolor="ffffff"
			textcolor_active="ffffff"
			backcolor_active="bd3135"
			fontsize="$g_fontsize_big2"
			fontname="$g_baseFontNameBold"
			align="center"
			//onclicked="4125_camera_onclicked" 
			onclicked="
			//$callaction(fnPopover_AlertAction,4125_camera_Shooting,자동촬영 하시겠습니까?,아니요,예);
            $callaction(4125_camera_Shooting);
			"
			/>
		</viewgroup>
		<br /><blank width="$w($g_lcdwidth,4.4)"/>
		<viewgroup
			width="$w($g_lcdwidth,92)"
			height="$h($g_lcdHeight,35)"
			backcolor="f1f1f1">
			<label
			width="$w($g_lcdwidth,45.1)" 
			height="$h($g_lcdHeight,4.5)"
			value="이름"
			/>
			<blank width="$w($g_lcdWidth,1.8)"/>
			<label
			width="$w($g_lcdwidth,45.1)" 
			height="$h($g_lcdHeight,4.5)"
			value="주민번호"
			/>
			<br />
			<textfield
			id="tf_4125_name"
			width="$w($g_lcdwidth,45.1)" 
			height="$h($g_lcdHeight,6.3)"
			margin_left="$w($g_lcdWidth,2)"
			keyboard_type="text"
			backcolor="ffffff"
			border_color="cccccc"
			backcolor_disable="e9e9e9"
			enable="true"
			/>
			<blank width="$w($g_lcdWidth,1.8)"/>
			<textfield id="tf_4125_jumin"
			width="$w($g_lcdwidth,45.1)" 
			height="$h($g_lcdHeight,6.3)"
			margin_left="$w($g_lcdWidth,2)"
			backcolor="ffffff"
			border_color="cccccc"
			input_type="number"
			keyboard_type="number"
			backcolor_disable="e9e9e9"
			align="left"
			maxlength="32"
			fontsize="$g_fontSize_basic"
			fontname="$g_baseFontName"
			enable="false"
			/>
			<br />
			<label id="lbl_4125_LicenceNumber"
			width="$w($g_lcdwidth,45.1)" 
			height="$h($g_lcdHeight,4.5)"
			value="면허번호"
			/>
			<br />
			<textfield id="tf_4125_LicenceNumber"
			width="$w($g_lcdwidth,45.1)" 
			height="$h($g_lcdHeight,6.3)"
			margin_left="$w($g_lcdWidth,2)"
			backcolor="ffffff"
			border_color="cccccc"
			input_type="number"
			keyboard_type="number"
			backcolor_disable="e9e9e9"
			align="left"
			maxlength="32"
			fontsize="$g_fontSize_basic"
			fontname="$g_baseFontName"
			enable="false"
			/>
			<br />
			<label id="lbl_4125_date"
			width="$w($g_lcdwidth,45.1)" 
			height="$h($g_lcdHeight,4.5)"
			value="발급일자"
			/>
			<!-- <blank width="$w($g_lcdWidth,1.8)"/>
			<label id="lbl_4125_SecuritySerial"
			width="$w($g_lcdwidth,45.1)" 
			height="$h($g_lcdHeight,4.5)"
			value="암호일련번호"
			/> -->
			<br />
			<textfield id="tf_4125_date"  		// 발급일자 
			width="$w($g_lcdwidth,45.1)" 
			height="$h($g_lcdHeight,6.3)"
			margin_left="$w($g_lcdWidth,2)"
			keyboard_type="number"
			input_type="number"
			backcolor_disable="e9e9e9"
			align="left"
			enable="false"
			/>
			<!-- <blank width="$w($g_lcdWidth,1.8)"/>
			<textfield id="tf_4125_SecuritySerial" 		// 암호일련번호
			width="$this.remain_right" 
			height="$h($g_lcdHeight,6.3)"
			margin_left="$w($g_lcdWidth,2)"
			backcolor_disable="e9e9e9"
			align="left"
			enable="false"
			/> -->
		</viewgroup>
		<br/>
		<blank width="$w($g_lcdWidth,4)" />
		<button 
		id="btn_4125_bf"
		fontsize="$g_fontsize_big3" 
		y="$result($this.remain_bottom-$h($g_lcdHeight,13.4))"
		width="$w($g_lcdwidth,45.1)" 
		height="$h($g_lcdHeight,9.4)" 
		backcolor="ffffff"
		border_width="$g_roundHeight"
		border_color="e33433"
		backcolor_active="e5e5e5"
		textcolor="e33433"
		textcolor_active="e33433"
		value="이전" 
		onclicked="btn_open_account_history_onClicked"
		//$callaction(Act_Open_Account_Move,4119);
		//$closescreen(popscreen_base);
		//enable="false"
		//backcolor_disable="bfbfbf"
		//textcolor_disable="999999"
		/>
		<blank width="$w($g_lcdWidth,1.8)"/>
		<button 
		id="btn_4125_af"
		y="$result($this.remain_bottom-$h($g_lcdHeight,13.4))"
		fontsize="$g_fontsize_big3" 
		width="$w($g_lcdwidth,45.1)" 
		height="$h($g_lcdHeight,9.4)" 
		backcolor="e33433"
		border_width="$g_roundHeight"
		backcolor_active="cc2f2e"
		textcolor="ffffff"
		textcolor_active="ffffff"
		value="신분증 진위확인" 
		onclicked="btn_4125_af_onClicked
		"
		/>
		<br height="$h($g_lcdHeight,4)"/>
	</screen>
</screen>

<popscreen id="pop_image_process" modal="true"
	width="$w($g_lcdwidth,60)" height="$h($g_lcdHeight,10)"  layout="center" layout_vertical="center"
	backcolor="ffffff" border_color="cccccc" border_radius="$result($this.height/4)" border_width="$g_roundHeight"
	>
	<label width="$super.width" height="$super.height" fontsize="$g_fontsize_basic"  value="이미지\n변환작업중입니다" align="center"/>
</popscreen>

// 금결원검증 때문에 - 시작
//투자자 정보 확인서 등록
<action id="fnSendSSL_MO_CUST" 
value="

	$setvar(	jsonName 		= MO_CUST 	);
	$json_create($jsonName);

	$json_setdata($jsonName,,HDR,,{});
	$json_setdata($jsonName,HDR,VER,,1.0); 					// 1.0 : 연동버전
	$json_setdata($jsonName,HDR,CMD,,$jsonName);			// 

	$json_setdata($jsonName,,BODY,,{});
	$json_setdata($jsonName,BODY,WORK_NO,,$g_OUT_AGREE_WORK_NO); 	// 상담번호
	$json_setdata($jsonName,BODY,CUST_TP,,1); 						// 고객구분: 1-개인, 2-법인
	$json_setdata($jsonName,BODY,CUSTT_YN,,N); 	// 투자권유 희망 여부: Y-희망 N-불원
	$json_setdata($jsonName,BODY,USE_PRE,,N); 		// 기존정보 사용여부: Y-사용 N-신규/갱신(존재하지 않으면 오류) Y:사용, N:신규/갱신,C:정상완료된 내역만 확인
	$json_setdata($jsonName,BODY,Q1,,4); 				// 질문1  1:19세 이하,2:20세~40세,3:41세~50세,4:51세~60세,5:61세 이상
	$json_setdata($jsonName,BODY,Q2,,3); 				// 질문2  1:6개월 미만,2:6개월 ~ 1년,3:1년 ~ 2년,4:2년 ~ 3년,5:3년 이상
	$json_setdata($jsonName,BODY,Q3A,,1); 				// 질문3-1: 1 선택하지 않은 항목은 공백 :안정형 상품-1
	$json_setdata($jsonName,BODY,Q3B,,); 				// 질문3-2: 2 선택하지 않은 항목은 공백 :안정추구형 상품 -2
	$json_setdata($jsonName,BODY,Q3C,,); 				// 질문3-3: 3 선택하지 않은 항목은 공백 :위험중립형 상품 - 3
	$json_setdata($jsonName,BODY,Q3D,,); 				// 질문3-4: 4 선택하지 않은 항목은 공백 :적극 투자형 상품 - 4
	$json_setdata($jsonName,BODY,Q3E,,); 				// 질문3-5: 5 선택하지 않은 항목은 공백 :공격투자형 상품 - 5
	$json_setdata($jsonName,BODY,Q4,,3); 				// 질문4   1:매우 낮음,2:낮은 수준,3:높은 수준,4:매우 높은 수준
	$json_setdata($jsonName,BODY,Q5,,2); 				// 질문5   1:10% 이하,2:10% ~ 20%,3:20% ~ 30%,4:30% ~ 40%,5:40%초과
	$json_setdata($jsonName,BODY,Q6,,1); 				// 질문6.  1:현재 일정한 수입/ 향후 유지, 증가,2:현재 일정한 수입/ 향후 감소,불안정,3:현재. 수입 없고 연금이 주 수입원
	$json_setdata($jsonName,BODY,Q7,,3); 				// 질문7   1:무슨 일이 있어도 투자 원금은 보전되어야 한다.,2:투자원금에서 최소한의 손실만을 감수할 수 있다.,3:투자원금 중 일부의 손실을 감수할 수 있다.,4:기대수익이 높다면 위험이 높아도 상관하지 않겠다.
	$json_setdata($jsonName,BODY,Q8,,3); 				// 질문8.  1:안정형,2:안정추구형,3:위험중립형,4:적극 투자형,5:공격투자형
	$json_setdata($jsonName,BODY,Q9,,3); 				// 질문9.  1:3년 이하,2:5년 이하,3:5년 이상 //받은거랑 틀림. - MTS에 되어있는데로 
	$json_setdata($jsonName,BODY,COUN_01,,Y); 		// 투자권유 불원 확인 Y 

	$json_setdata($jsonName,BODY,WEAK_YN,,N); 		// 취약 금융 소비자 여부 N,Y 
	$json_setdata($jsonName,BODY,CFRM_YN,,Y); 		// 투자권유 불원 확인서 (취약 금융 소비자) Y
	
	//$json_print($jsonName);
	$delvar(strSSLSendData);
	$json_getfullstring($jsonName,strSSLSendData);
	//$json_delete($jsonName);
	$json_delete(ALLFREE);
	//$logvar(strSSLSendData);	
	$callaction(Act_SSL_SendData,$g_SSLSocketName,strSSLSendData);

"/>
<action id="fnRecvSSL_MO_CUST" 
value="
	$closescreen(pop_host_msg);
	$setvar(
		recvSSL_hrd_ret 		= $json_getdata($jsonname,HDR.RET)
		,recvSSL_hrd_MSG 		= $json_getdata($jsonname,HDR.MSG)
		,recvSSL_hdr_err_code	= $json_getdata($jsonname,HDR.ERR_CODE)

		,recvSSL_body_INV_TP 	= $json_getdata($jsonname,BODY.INV_TP) 		//투자성향 
		,recvSSL_body_COUN_YN 	= $json_getdata($jsonname,BODY.COUN_YN)
		,recvSSL_body_Q1 		= $json_getdata($jsonname,BODY.Q1)
		,recvSSL_body_Q2 		= $json_getdata($jsonname,BODY.Q2)
		,recvSSL_body_Q3A 		= $json_getdata($jsonname,BODY.Q3A)
		,recvSSL_body_Q3B 		= $json_getdata($jsonname,BODY.Q3B)
		,recvSSL_body_Q3C 		= $json_getdata($jsonname,BODY.Q3C)
		,recvSSL_body_Q3D 		= $json_getdata($jsonname,BODY.Q3D)
		,recvSSL_body_Q3E 		= $json_getdata($jsonname,BODY.Q3E)
		,recvSSL_body_Q4 		= $json_getdata($jsonname,BODY.Q4)
		,recvSSL_body_Q5 		= $json_getdata($jsonname,BODY.Q5)
		,recvSSL_body_Q6 		= $json_getdata($jsonname,BODY.Q6)
		,recvSSL_body_Q7 		= $json_getdata($jsonname,BODY.Q7)
		,recvSSL_body_Q8 		= $json_getdata($jsonname,BODY.Q8)
		,recvSSL_body_Q9 		= $json_getdata($jsonname,BODY.Q9)
	);
	$setvar(recv_error_msg = $callaction(Act_Error_Message_Account,$recvSSL_hdr_err_code));

	//$log(========= SSL 받은데이터 ==============);
	if(!$isequal_string($recvSSL_hrd_ret,OK)){
		//$alertaction(,,$recv_error_msg,확인);
		$callaction(fnPopover_AlertAction,,$recv_error_msg,,확인);
		return;
	}

	$callaction(fnSendSSL_MO_IDCARD); // 금결원검증 때문에
"/>


<action id="btn_4125_af_onClicked"
value="
	$changescreen_parse(screen_4125_100_photo,subscreen_4125_100);

	//$callaction(Act_Open_Account_Move,4133);
	//return;

/*
	$setvar(
		g_save_ID01_1 	= $tf_4125_date.value 	// 발급일자
		,g_save_ID02_1 	= $addstring($tf_4125_1_1.value,$tf_4125_1_2.value,$tf_4125_1_3.value,$tf_4125_1_4.value)
		,g_save_ID02_2 	= $tf_4125_4_4.value
		,g_save_jumin 	= $strJuminNumber
	);
	
	if($isequal_string($strType,1)){ 			// 주민등록증 선택
		$setvar_common(
			g_IN_REQUEST_IDCARD_TYPE 	= ID01
			,g_IN_REQUEST_RMN_NO 		= $g_save_jumin
			,g_IN_REQUEST_RMN_DATE 		= $g_save_ID01_1
			,g_IN_REQUEST_DRV_NO 		= 
			,g_IN_REQUEST_DRV_CODE 		= 
		);

	}
	elseif($isequal_string($strType,2)){		// 운전면허증 선택
		if($strlen($g_save_ID02_1)<1 || $strlen($g_save_ID02_2)<1){
			$alert(,,신분증 촬영을 먼저 진행해 주십시오.,확인,);
			return;
		}
		$setvar_common(
			g_IN_REQUEST_IDCARD_TYPE 	= ID02
			,g_IN_REQUEST_RMN_NO 		= $g_save_jumin
			,g_IN_REQUEST_RMN_DATE 		= $g_save_ID01_1
			,g_IN_REQUEST_DRV_NO 		= $g_save_ID02_1
			,g_IN_REQUEST_DRV_CODE 		= $g_save_ID02_2
		);
		
	}
*/
	$callaction(fnSendSSL_MO_IDCARD);

" />


<action id="fnSendSSL_MO_IDCARD"
value="	// 비대면 절차개선 - 2020.09.28
		// 신분증 진위여부 조회
	$popscreen(pop_host_msg,center); 		// 동글뱅이 띄운다.
	$setvar(	
		jsonName 		= MO_IDCARD 	
	);
    $iconv_utf32le_to_utf8(strJuminNumber,utf8_JuminNumber); 		//UTF32-LE 를 UTF-8로 변환 후 사용 common으로 저장됨.
    $iconv_utf32le_to_utf8(strIssueDate,utf8_IssueDate);
    $iconv_utf32le_to_utf8(strLicenceNumber,utf8_LicenceNumber);
	//$logvar(utf8_JuminNumber,utf8_IssueDate,utf8_LicenceNumber);

	$delvar(utf8_JuminNumber_kisa_encrypt,utf8_IssueDate_kisa_encrypt,utf8_LicenceNumber_kisa_encrypt);
    $KISA_SEED_CBC_ENCRYPT(utf8_JuminNumber,utf8_JuminNumber_kisa_encrypt); 			// default : local
    $KISA_SEED_CBC_ENCRYPT(utf8_IssueDate,utf8_IssueDate_kisa_encrypt);
    $KISA_SEED_CBC_ENCRYPT(utf8_LicenceNumber,utf8_LicenceNumber_kisa_encrypt);

    //$logvar(utf8_JuminNumber,utf8_IssueDate,utf8_LicenceNumber);
    //$logvar(utf8_JuminNumber_kisa_encrypt,utf8_IssueDate_kisa_encrypt,utf8_LicenceNumber_kisa_encrypt);
    
    $delvar_common(utf8_JuminNumber,utf8_IssueDate,utf8_LicenceNumber); 		// 원문삭제
    $logvar(utf8_JuminNumber,utf8_IssueDate,utf8_LicenceNumber);

	$json_create($jsonName);
	$json_setdata($jsonName,,HDR,,{});
	$json_setdata($jsonName,HDR,VER,,1.0); 					// 1.0 : 연동버전
	$json_setdata($jsonName,HDR,CMD,,$jsonName);			// 
	$json_setdata($jsonName,,BODY,,{});
	$json_setdata($jsonName,BODY,IDCARD_TYPE,,$g_IN_REQUEST_IDCARD_TYPE); 	// ID01: 주민등록증, ID02: 운전면허증
	$json_setdata($jsonName,BODY,CLNT_NM,,$tf_4125_name.value); 			// 고객명
	$json_setdata($jsonName,BODY,RMN_NO,,$utf8_JuminNumber_kisa_encrypt); 			// 주민등록번호
	$json_setdata($jsonName,BODY,RMN_DATE,,$utf8_IssueDate_kisa_encrypt); 		// 주민등록증 발급일자
	$json_setdata($jsonName,BODY,DRV_NO,,$utf8_LicenceNumber_kisa_encrypt); 			// 운전면허번호
	//$json_setdata($jsonName,BODY,DRV_CODE,,$strSecuritySerial); 		// 운전면허증 암호일련번호
	$json_setdata($jsonName,BODY,WORK_NO,,$g_OUT_AGREE_WORK_NO); 			// 상담번호

	// 20240617 금결원 이슈로 인해 추가요청함.
	$json_setdata($jsonName,BODY,PICTURE,,{});						// 실명증표	
	$json_setdata($jsonName,BODY.PICTURE,IMAGE,,$g_save_frontImageEncryptData_base64); 					// 실명증표사진 - 
	$json_getfullstring($jsonName,strSSLSendData);
	$callaction(Act_SSL_SendData,$g_SSLSocketName,strSSLSendData);	
	$json_delete($jsonName); 			// 사용 후 초기화 
	$delvar(strSSLSendData);
	
	//$KISA_SEED_CBC_DECRYPT(utf8_JuminNumber_kisa_encrypt,utf8_JuminNumber_kisa_decrypt);
    //$KISA_SEED_CBC_DECRYPT(utf8_IssueDate_kisa_encrypt, utf8_IssueDate_kisa_decrypt);
    //$KISA_SEED_CBC_DECRYPT(utf8_LicenceNumber_kisa_encrypt, utf8_LicenceNumber_kisa_decrypt);
    //$logvar(utf8_JuminNumber_kisa_decrypt,utf8_IssueDate_kisa_decrypt,utf8_LicenceNumber_kisa_decrypt);

    $callaction(fnConfig_SetValue,g_IN_REQUEST_RMN_DATE_ENC ,$utf8_IssueDate_kisa_encrypt);
    $callaction(fnConfig_SetValue,g_IN_REQUEST_DRV_NO_ENC 	,$utf8_LicenceNumber_kisa_encrypt);
    //$callaction(fnConfig_SetValue,g_IN_REQUEST_DRV_CODE_ENC ,$strSecuritySerial);

	
"/>
<action id="fnRecvSSL_MO_IDCARD" 
value="	// 비대면 절차개선 - 2020.09.28
		// 신분증 진위여부 조회
	$setvar(
		recvSSL_hdr_ret 			= $json_getdata($jsonname,HDR.RET)
		,recvSSL_hdr_msg 			= $json_getdata($jsonname,HDR.MSG)
		,recvSSL_hdr_err_code		= $json_getdata($jsonname,HDR.ERR_CODE)
		,recvSSL_body_result_yn 	= $json_getdata($jsonname,BODY.RESULT_YN)		// 진위여부 Y/N
		,recvSSL_body_reject_reason = $json_getdata($jsonname,BODY.REJECT_REASON) 	// 거부사유

	);
	$setvar(recv_error_msg = $callaction(Act_Error_Message_Account,$recvSSL_hdr_err_code));
/*
	$log(========= SSL 받은데이터 ==============);
	$logvar(
		recvSSL_hdr_ret 
		,recvSSL_hdr_msg 
		,recvSSL_body_result_yn
		,recvSSL_body_reject_reason
	);
*/
	if($isequal_string($recvSSL_body_result_yn,N)){ 	// 신용등급 확인후 팝업띄움
		$setvar(tmp_result_N_count = $result($tmp_result_N_count + 1));
		$logvar(tmp_result_N_count);
	}else{
		$setvar(tmp_result_N_count = );
	}

	if($tmp_result_N_count == 5){
		$closescreen(pop_host_msg); 
		$popscreen(pop_caution_result_N_count_5);
		return;
	}

	if(!$isequal_string($recvSSL_hdr_ret,OK)){
		$closescreen(pop_host_msg); 		// 동글뱅이 멈춤 
		//$alertaction(,,$recv_error_msg,확인);
		//$callaction(fnPopover_AlertAction,,$recv_error_msg,,확인);
		$callaction(fnPopover_AlertAction,,$recvSSL_hdr_msg,,확인);
		return;
	}

	$setvar($date_compare=$now(dd));
	//$log(현재일자[$now(dd)], 변수 현재일자[$date_compare], 전역변수 저장일자[$g_date_compare]);

	if($strlen($g_date_compare)<1){
		$callaction(fnConfig_SetValue,g_date_compare,$date_compare);
	}
	if($date_compare!=$g_date_compare){
		//$log(>> 진위여부 횟수 초기화);
		$callaction(fnConfig_SetValue,g_date_compare,$date_compare); 	// 자정마다 날짜를 전역변수에 저장
		$callaction(fnConfig_SetValue,g_recvSSL_body_result_count,0);	// 자정이후 진위여부 횟수 초기화
	}
	else{
		//$log(>> 일자 변동없음..진위여부 횟수 초기화 x);
	}

	if($isequal_string($recvSSL_body_result_yn,N)){ 	// 신용등급 확인후 팝업띄움
		// 진위여부가 N일 경우 5까지 카운트
		$callaction(fnConfig_SetValue,g_save_result_yn,$recvSSL_body_result_yn);	// 진위여부 N 저장

		//$log( =============== 진위여부판독 =============== );
		//$log(카운트1[$g_recvSSL_body_result_count]);
		if($strlen($g_recvSSL_body_result_count)<1){
			$setvar(recvSSL_body_result_count=1);
			$callaction(fnConfig_SetValue,g_recvSSL_body_result_count,$recvSSL_body_result_count);
			//$log(카운트2[$g_recvSSL_body_result_count]);
		}
		elseif($strlen($g_recvSSL_body_result_count)>0){
			if($g_recvSSL_body_result_count<5){
				$setvar(recvSSL_body_result_count=$result($g_recvSSL_body_result_count+1));
				$callaction(fnConfig_SetValue,g_recvSSL_body_result_count,$recvSSL_body_result_count);
				//$log(카운트3[$g_recvSSL_body_result_count]);
			}
			if($g_recvSSL_body_result_count==5){
				//$log(카운트4[$g_recvSSL_body_result_count]);
				$closescreen(pop_host_msg); 		// 동글뱅이 멈춤 
				//$log(진위여부 데이터 확인 (N 이어야함) >> g_save_result_yn[$g_save_result_yn]);
				$popscreen(pop_caution2);
				return;
			}
		}
		$closescreen(pop_host_msg); 		// 동글뱅이 멈춤 
		$setvar(recvSSL_body_reject_reason=$recvSSL_body_reject_reason 신분증 재촬영 또는 입력정보를 수정해주세요.);
		$popscreen(pop_caution1);
		return;
	}
	elseif($isequal_string($recvSSL_body_result_yn,Y)){
		if($g_recvSSL_body_result_count==5){
			//$log(카운트 5회 초과로 영상통화만 가능);
			$callaction(fnConfig_SetValue,g_save_result_yn,N);	// 진위여부 Y 저장
			//$log(진위여부 Y로 성공해도 5회초과이므로 N으로 강제 변경);
			$closescreen(pop_host_msg); 		// 동글뱅이 멈춤 
			//$log(진위여부 데이터 확인 (N 이어야함) >> g_save_result_yn[$g_save_result_yn]);
			$popscreen(pop_caution2);
			return;
		}
	}
	$callaction(fnConfig_SetValue,g_save_result_yn,$recvSSL_body_result_yn);	// 진위여부 Y 저장

	// 국내선택시 16시이후 역이체불가능 팝업
	//$callaction(fnConfig_SetValue,g_open_tp_select,2);	// g_open_tp_select 해외:1, 국내:2
	if($g_open_tp_select==2){		// 국내 선택시
		if($now(HH) >= 16){			// 16시 이후
			$closescreen(pop_host_msg); 		// 동글뱅이 멈춤 
			
			$popscreen(pop_caution6);
			return;
		}
	}
	
	$callaction(fnConfig_SetValue,g_recvSSL_body_result_count,0);
	$closescreen(pop_host_msg); 		// 동글뱅이 멈춤 
	//$log(진위여부 데이터 확인 (Y 이어야함) >> g_save_result_yn[$g_save_result_yn]);

	/*
	$log(
		확인용 : 
			4101 g_IN_AGREE_ITEM1[$g_IN_AGREE_ITEM1],

			4142 g_IN_AGREE_ITEM2[$g_IN_AGREE_ITEM2],
			4142 g_IN_AGREE_ITEM3[$g_IN_AGREE_ITEM3],

			4102 g_save_tel_num[$g_save_tel_num],
			4102 g_IN_AGREE_RMN_NO[$g_IN_AGREE_RMN_NO],
			4102 g_IN_AGREE_CLNT_NM[$g_IN_AGREE_CLNT_NM],
			4102 g_IN_REQUEST_TEL_NUM[$g_IN_REQUEST_TEL_NUM],
			4102 g_IN_REQUEST_AGE[$g_IN_REQUEST_AGE],
			4102 g_OUT_AGREE_WORK_NO[$g_OUT_AGREE_WORK_NO],

			4117 g_IN_REQUEST_LOCAL_YN[$g_IN_REQUEST_LOCAL_YN],
			4117 g_IN_REQUEST_ABODE_NM[$g_IN_REQUEST_ABODE_NM],
			4117 g_IN_REQUEST_HOME_POST_NO[$g_IN_REQUEST_HOME_POST_NO],
			4117 g_IN_REQUEST_HOME_ADDR[$g_IN_REQUEST_HOME_ADDR],
			4117 g_IN_REQUEST_HOME_ADDR2[$g_IN_REQUEST_HOME_ADDR2],

			4143 g_IN_REQUEST_JOB_NM[$g_IN_REQUEST_JOB_NM],
			4143 g_IN_REQUEST_COM_NM[$g_IN_REQUEST_COM_NM],
			4143 g_IN_REQUEST_COM_DEPART[$g_IN_REQUEST_COM_DEPART],
			4143 g_IN_REQUEST_COM_TEL[$g_IN_REQUEST_COM_TEL],
			4143 g_IN_REQUEST_COM_POST_NO[$g_IN_REQUEST_COM_POST_NO],
			4143 g_IN_REQUEST_COM_ADDR[$g_IN_REQUEST_COM_ADDR],
			4143 g_IN_REQUEST_COM_ADDR2[$g_IN_REQUEST_COM_ADDR2],

			4144 g_IN_REQUEST_CLNT_EMAIL[$g_IN_REQUEST_CLNT_EMAIL],
			4144 g_IN_REQUEST_TRD_PPO[$g_IN_REQUEST_TRD_PPO],
			4144 g_IN_REQUEST_FUNDS[$g_IN_REQUEST_FUNDS],
			4144 g_IN_REQUEST_OWN_YN[$g_IN_REQUEST_OWN_YN],
			4144 g_IN_REQUEST_AMERICAN_YN[$g_IN_REQUEST_AMERICAN_YN],
			4144 g_IN_REQUEST_TRADE[$g_IN_REQUEST_TRADE],
			4144 g_IN_REQUEST_DEAL[$g_IN_REQUEST_DEAL],

			4145 g_IN_REQUEST_PD1[$g_IN_REQUEST_PD1],
			4145 g_chk_4117_5gr_1[$g_chk_4117_5gr_1],
			4145 g_chk_4117_5gr_2[$g_chk_4117_5gr_2],
			4145 g_IN_REQUEST_NEW_PW[$g_IN_REQUEST_NEW_PW],
			4145 g_save_members_nm[$g_save_members_nm],
			4145 g_save_members_no[$g_save_members_no],
			4145 g_open_tp_select[$g_open_tp_select],

			4118 X,

			4135 X,

			4141 X,

			4119 g_IN_BNKNAME_BNK_CODE[$g_IN_BNKNAME_BNK_CODE],
			4119 g_IN_BNKNAME_BNK_NO[$g_IN_BNKNAME_BNK_NO],
			4119 g_IN_BNKNAME_BNK_NM[$g_IN_BNKNAME_BNK_NM],
			4119 g_save_bank_name[$g_save_bank_name],
			4119 g_save_bank_code[$g_save_bank_code],
			4119 g_save_acnt_name[$g_save_acnt_name],
			4119 g_save_acnt_no[$g_save_acnt_no],

			4120 X,

			4125 g_IN_REQUEST_IDCARD_TYPE[$g_IN_REQUEST_IDCARD_TYPE],
			4125 g_save_frontImageEncryptData_base64[$g_save_frontImageEncryptData_base64],
			4125 g_IN_REQUEST_RMN_DATE_ENC[$g_IN_REQUEST_RMN_DATE_ENC],
			4125 g_IN_REQUEST_DRV_NO_ENC[$g_IN_REQUEST_DRV_NO_ENC],
			4125 g_IN_REQUEST_DRV_CODE_ENC[$g_IN_REQUEST_DRV_CODE_ENC],
			4125 g_date_compare[$g_date_compare],
			4125 g_recvSSL_body_result_count[$g_recvSSL_body_result_count],
			4125 g_save_result_yn[$g_save_result_yn],
	);
	*/

	$callaction(Act_Open_Account_Move,4133);

"/>

<popscreen id="pop_caution1"
	width="$g_lcdWidth" 
	height="$p_lcdHeight"
	//backcolor="0000ff"
	modal="true"
	modalbackcolor="#00000088"
	layout="center"
	layout_vertical="center"
	onload=""
	onclicked="$closescreen();"
	key=""
	>
	<screen id="screen_comboAccountPopover"
		width="$w($g_lcdWidth,88.3)"
		//height="$h($g_lcdHeight,70)"
		height="$h($g_lcdHeight,52.5)"
		backcolor="none"
		layout="center"
		layout_vertical="center"
		noscroll_width="true"
		>
		<viewgroup 
			width="$super.width"
			height="$h($g_lcdHeight,8.6)"
			backcolor="ffffff"
			>
			<label width="$super.width" height="$super.height" align="left" margin_left="$w($g_lcdWidth,3.2)" 
			fontname="$g_baseFontNameBold"
			fontsize="$g_fontsize_big2"
			value="알림" />
		</viewgroup>
		<br/><hr backcolor="3c3c3c" /><br/>
		<viewgroup 
			width="$super.width"
			//height="$h($g_lcdHeight,49)"
			height="$h($g_lcdHeight,18)"
			backcolor="ffffff"
			>
			<viewgroup
				width="$super.width"
				height="$h($g_lcdHeight,15)"
				>
				<br height="$h($g_lcdHeight,3)" /><blank width="$w($g_lcdWidth,4)"/>
				<htmlview width="$w($g_lcdWidth,78.3)" height="$h($g_lcdHeight,12)" 
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					lineheight="$h($g_lcdHeight,3)"
					VALUE_HTML_VAR="recvSSL_body_reject_reason"
					/>

			</viewgroup>
		</viewgroup>
		<br />
		<viewgroup height="$h($g_lcdHeight,10)">
			<button 
				width="100%" 
				height="$super.height" 
				value="확인" 
				backcolor="bd3135"
				backcolor_active="b8240c"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="ffffff"
				textcolor_active="ffffff"
				onclicked="$closescreen();"
				/>
		</viewgroup>
	</screen>
</popscreen>
<popscreen id="pop_caution2"
	width="$g_lcdWidth" 
	height="$p_lcdHeight"
	//backcolor="0000ff"
	modal="true"
	modalbackcolor="#00000088"
	layout="center"
	layout_vertical="center"
	onload=""
	onclicked="$closescreen();"
	key=""
	>
	<screen id="screen_comboAccountPopover"
		width="$w($g_lcdWidth,88.3)"
		//height="$h($g_lcdHeight,70)"
		height="$h($g_lcdHeight,49.5)"
		backcolor="none"
		layout="center"
		layout_vertical="center"
		noscroll_width="true"
		>
		<viewgroup 
			width="$super.width"
			height="$h($g_lcdHeight,8.6)"
			backcolor="ffffff"
			>
			<label width="$super.width" height="$super.height" align="left" margin_left="$w($g_lcdWidth,3.2)" 
			fontname="$g_baseFontNameBold"
			fontsize="$g_fontsize_big2"
			value="안내" />
		</viewgroup>
		<br/><hr backcolor="3c3c3c" /><br/>
		<viewgroup 
			width="$super.width"
			//height="$h($g_lcdHeight,49)"
			height="$h($g_lcdHeight,17)"
			backcolor="ffffff"
			>
			<viewgroup
				width="$super.width"
				height="$h($g_lcdHeight,20)"
				>
				<br height="$h($g_lcdHeight,2)" /><blank width="$w($g_lcdWidth,3.5)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					value="진위여부가 확인되지 않습니다." />
				<!--	
				<br /><blank width="$w($g_lcdWidth,3.5)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName"
					fontsize="$g_fontSize_big1" 
					value="수동 진위여부후 영상통화를 신청하시겠습니까?" />    
				<br /><blank width="$w($g_lcdWidth,3.5)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_basic"
					value="(영상통화의 경우 오전9시~오후4시 사이에만 가능" />
					<br /><blank width="$w($g_lcdWidth,3.5)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_basic"
					value="합니다. 이후 시간에는 예약만 가능합니다.)" />
				-->
			</viewgroup>
		</viewgroup>
		<br />
		<viewgroup height="$h($g_lcdHeight,10)" backcolor="ffffff">
			<blank width="3.5%" />
			<button 
				width="45%" 
				height="$result($super.height-$h($g_lcdHeight,1.5))" 
				value="영상통화 신청" 
				backcolor="bd3135"
				backcolor_active="b8240c"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="ffffff"
				textcolor_active="ffffff"
				onclicked="$closescreen();
				$callaction(Act_Open_Account_Move, 4121);"
				/>
			<blank width="3%" />
			<button 
				width="45%" 
				height="$result($super.height-$h($g_lcdHeight,1.5))"
				value="취소" 
				backcolor="ffffff"
				backcolor_active="e5e5e5"
				border_width="$g_roundHeight"
				border_color="bd3135"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="bd3135"
				textcolor_active="bd3135"
				onclicked="$closescreen();
				$popscreen(pop_caution5);"
				/>
			<!-- <blank width="3.5%" />
			
			<button 
				width="93%" 
				height="$result($super.height-$h($g_lcdHeight,1.5))"
				value="취소" 
				backcolor="ffffff"
				backcolor_active="e5e5e5"
				border_width="$g_roundHeight"
				border_color="bd3135"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="bd3135"
				textcolor_active="bd3135"
				layout="center"
				onclicked="$closescreen()"
				/> -->

		</viewgroup>
	</screen>
</popscreen>

<popscreen id="pop_caution_result_N_count_5"
	width="$g_lcdWidth" 
	height="$p_lcdHeight"
	//backcolor="0000ff"
	modal="true"
	modalbackcolor="#00000088"
	layout="center"
	layout_vertical="center"
	onload=""
	onclicked="$closescreen();"
	key=""
	>
	<screen id="screen_comboAccountPopover"
		width="$w($g_lcdWidth,88.3)"
		//height="$h($g_lcdHeight,70)"
		height="$h($g_lcdHeight,49.5)"
		backcolor="none"
		layout="center"
		layout_vertical="center"
		noscroll_width="true"
		>
		<viewgroup 
			width="$super.width"
			height="$h($g_lcdHeight,8.6)"
			backcolor="ffffff"
			>
			<label width="$super.width" height="$super.height" align="left" margin_left="$w($g_lcdWidth,3.2)" 
			fontname="$g_baseFontNameBold"
			fontsize="$g_fontsize_big2"
			value="안내" />
		</viewgroup>
		<br/><hr backcolor="3c3c3c" /><br/>
		<viewgroup 
			width="$super.width"
			//height="$h($g_lcdHeight,49)"
			height="$h($g_lcdHeight,17)"
			backcolor="ffffff"
			>
			<viewgroup
				width="$super.width"
				height="$h($g_lcdHeight,17)"
				>
				//<br height="$h($g_lcdHeight,2)" /><blank width="$w($g_lcdWidth,3.5)"/>
				<label width="$this.remain_right" height="$this.remain_bottom"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					align="left" 
					margin_left="$w($g_lcdWidth,3.2)"
					valign="center"
					value="신분증 인식에 실패하였습니다.\n영상통화로 진행하시겠습니까?" />
			</viewgroup>
		</viewgroup>
		<br />
		<viewgroup height="$h($g_lcdHeight,10)" backcolor="ffffff">
			<blank width="3.5%" />
			<button 
				width="45%" 
				height="$result($super.height-$h($g_lcdHeight,1.5))" 
				value="예" 
				backcolor="bd3135"
				backcolor_active="b8240c"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="ffffff"
				textcolor_active="ffffff"
				onclicked="$closescreen();
				$callaction(Act_Open_Account_Move, 4121);"
				/>
			<blank width="3%" />
			<button 
				width="45%" 
				height="$result($super.height-$h($g_lcdHeight,1.5))"
				value="아니요" 
				backcolor="ffffff"
				backcolor_active="e5e5e5"
				border_width="$g_roundHeight"
				border_color="bd3135"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="bd3135"
				textcolor_active="bd3135"
				onclicked="btn_result_N_count_5_cancel_onClicked"
				/>
			<!-- <blank width="3.5%" />
			
			<button 
				width="93%" 
				height="$result($super.height-$h($g_lcdHeight,1.5))"
				value="취소" 
				backcolor="ffffff"
				backcolor_active="e5e5e5"
				border_width="$g_roundHeight"
				border_color="bd3135"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="bd3135"
				textcolor_active="bd3135"
				layout="center"
				onclicked="$closescreen()"
				/> -->

		</viewgroup>
	</screen>
</popscreen>
<action id="btn_result_N_count_5_cancel_onClicked"
value="
	$closescreen();
	$setvar(tmp_result_N_count = );
"/>


<popscreen id="pop_caution3"
	width="$g_lcdWidth" 
	height="$p_lcdHeight"
	//backcolor="0000ff"
	modal="true"
	modalbackcolor="#00000088"
	layout="center"
	layout_vertical="center"
	onload=""
	onclicked="$closescreen();"
	key=""
	>
	<screen id="screen_comboAccountPopover"
		width="$w($g_lcdWidth,88.3)"
		//height="$h($g_lcdHeight,70)"
		height="$h($g_lcdHeight,49.5)"
		backcolor="none"
		layout="center"
		layout_vertical="center"
		noscroll_width="true"
		>
		<viewgroup 
			width="$super.width"
			height="$h($g_lcdHeight,8.6)"
			backcolor="ffffff"
			>
			<label width="$super.width" height="$super.height" align="left" margin_left="$w($g_lcdWidth,3.2)" 
			fontname="$g_baseFontNameBold"
			fontsize="$g_fontsize_big2"
			value="알림" />
		</viewgroup>
		<br/><hr backcolor="3c3c3c" /><br/>
		<viewgroup 
			width="$super.width"
			//height="$h($g_lcdHeight,49)"
			height="$h($g_lcdHeight,15)"
			backcolor="ffffff"
			>
			<viewgroup
				width="$super.width"
				height="$h($g_lcdHeight,20)"
				>
				<br height="$h($g_lcdHeight,2)" /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					value="귀하의 신용등급이 개설조건에" />
				<br /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName"
					fontsize="$g_fontSize_big1"
					value="만족하지 않아 계좌개설이 불가능합니다." />    
				<br /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName"
					fontsize="$g_fontSize_big1"
					value="확인버튼을 누르시면 초기화면으로 이동합니다." />
			</viewgroup>
		</viewgroup>
		<br />
		<viewgroup height="$h($g_lcdHeight,10)">
			<button 
				width="100%" 
				height="$super.height" 
				value="확인" 
				backcolor="bd3135"
				backcolor_active="b8240c"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="ffffff"
				textcolor_active="ffffff"
				onclicked="$closescreen();
				$closescreen(popscreen_open_account);
				"
				/>
		</viewgroup>
	</screen>
</popscreen>
<popscreen id="pop_caution4"
	width="$g_lcdWidth" 
	height="$p_lcdHeight"
	//backcolor="0000ff"
	modal="true"
	modalbackcolor="#00000088"
	layout="center"
	layout_vertical="center"
	onload=""
	onclicked="$closescreen();"
	key=""
	>
	<screen id="screen_comboAccountPopover"
		width="$w($g_lcdWidth,88.3)"
		//height="$h($g_lcdHeight,70)"
		height="$h($g_lcdHeight,49.5)"
		backcolor="none"
		layout="center"
		layout_vertical="center"
		noscroll_width="true"
		>
		<viewgroup 
			width="$super.width"
			height="$h($g_lcdHeight,8.6)"
			backcolor="ffffff"
			>
			<label width="$super.width" height="$super.height" align="left" margin_left="$w($g_lcdWidth,3.2)" 
			fontname="$g_baseFontNameBold"
			fontsize="$g_fontsize_big2"
			value="안내" />
		</viewgroup>
		<br/><hr backcolor="3c3c3c" /><br/>
		<viewgroup 
			width="$super.width"
			//height="$h($g_lcdHeight,49)"
			height="$h($g_lcdHeight,10)"
			backcolor="ffffff"
			>
			<viewgroup
				width="$super.width"
				height="$h($g_lcdHeight,20)"
				>
				<br height="$h($g_lcdHeight,2)" /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					value="정보가 맞는지 다시 한번 확인후에" />
				<br /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					value="다음단계로 진행해주시기 바랍니다." />1111111
			</viewgroup>
		</viewgroup>
		<br />
		<viewgroup height="$h($g_lcdHeight,10)">
			<button 
				width="100%" 
				height="$super.height" 
				value="확인" 
				backcolor="bd3135"
				backcolor_active="b8240c"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="ffffff"
				textcolor_active="ffffff"
				onclicked="$closescreen();"
				/>
		</viewgroup>
	</screen>
</popscreen>
<popscreen id="pop_caution5"
	width="$g_lcdWidth" 
	height="$p_lcdHeight"
	//backcolor="0000ff"
	modal="true"
	modalbackcolor="#00000088"
	layout="center"
	layout_vertical="center"
	onload=""
	onclicked="$closescreen();"
	key=""
	>
	<screen id="screen_comboAccountPopover"
		width="$w($g_lcdWidth,88.3)"
		//height="$h($g_lcdHeight,70)"
		height="$h($g_lcdHeight,49.5)"
		backcolor="none"
		layout="center"
		layout_vertical="center"
		noscroll_width="true"
		>
		<viewgroup 
			width="$super.width"
			height="$h($g_lcdHeight,8.6)"
			backcolor="ffffff"
			>
			<label width="$super.width" height="$super.height" align="left" margin_left="$w($g_lcdWidth,3.2)" 
			fontname="$g_baseFontNameBold"
			fontsize="$g_fontsize_big2"
			value="안내" />
		</viewgroup>
		<br/><hr backcolor="3c3c3c" /><br/>
		<viewgroup 
			width="$super.width"
			//height="$h($g_lcdHeight,49)"
			height="$h($g_lcdHeight,14)"
			backcolor="ffffff"
			>
			<viewgroup
				width="$super.width"
				height="$h($g_lcdHeight,20)"
				>
				<br height="$h($g_lcdHeight,2)" /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					value="영상통화 신청이 취소되었습니다." />
				<br /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					value="다음날 계좌이체방식으로 다시 신청해 " />
				<br /><blank width="$w($g_lcdWidth,4)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					value="주시기 바랍니다." />
			</viewgroup>
		</viewgroup>
		<br />
		<viewgroup height="$h($g_lcdHeight,10)">
			<button 
				width="100%" 
				height="$super.height" 
				value="확인" 
				backcolor="bd3135"
				backcolor_active="b8240c"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="ffffff"
				textcolor_active="ffffff"
				onclicked="$closescreen();
				$closescreen(popscreen_open_account);"
				/>
		</viewgroup>
	</screen>
</popscreen>
<popscreen id="pop_caution6"
	width="$g_lcdWidth" 
	height="$p_lcdHeight"
	//backcolor="0000ff"
	modal="true"
	modalbackcolor="#00000088"
	layout="center"
	layout_vertical="center"
	onload=""
	onclicked="$closescreen();"
	key=""
	>
	<screen id="screen_comboAccountPopover"
		width="$w($g_lcdWidth,88.3)"
		//height="$h($g_lcdHeight,70)"
		height="$h($g_lcdHeight,49.5)"
		backcolor="none"
		layout="center"
		layout_vertical="center"
		noscroll_width="true"
		>
		<viewgroup 
			width="$super.width"
			height="$h($g_lcdHeight,8.6)"
			backcolor="ffffff"
			>
			<label width="$super.width" height="$super.height" align="left" margin_left="$w($g_lcdWidth,3.2)" 
			fontname="$g_baseFontNameBold"
			fontsize="$g_fontsize_big2"
			value="안내" />
		</viewgroup>
		<br/><hr backcolor="3c3c3c" /><br/>
		<viewgroup 
			width="$super.width"
			//height="$h($g_lcdHeight,49)"
			height="$h($g_lcdHeight,17)"
			backcolor="ffffff"
			>
			<viewgroup
				width="$super.width"
				height="$h($g_lcdHeight,20)"
				>
				<br height="$h($g_lcdHeight,2)" /><blank width="$w($g_lcdWidth,3.5)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_big1"
					value="16시 이후에는 영상통화 예약만 가능" />
				<br /><blank width="$w($g_lcdWidth,3.5)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName"
					fontsize="$g_fontSize_big1" 
					value="합니다. 영상통화를 신청하시겠습니까?" />    
				<br /><blank width="$w($g_lcdWidth,3.5)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_basic"
					value="(영상통화의 경우 오전9시~오후4시 사이에만 가능" />
					<br /><blank width="$w($g_lcdWidth,3.5)"/>
				<label width="$this.remain_right" height="$h($g_lcdHeight,3)"
					fontname="$g_baseFontName" 
					fontsize="$g_fontSize_basic"
					value="합니다. 이후 시간에는 예약만 가능합니다.)" />
			</viewgroup>
		</viewgroup>
		<br />
		<viewgroup height="$h($g_lcdHeight,10)" backcolor="ffffff">
			<blank width="3.5%" />
			<button 
				width="45%" 
				height="$result($super.height-$h($g_lcdHeight,1.5))" 
				value="영상통화 신청" 
				backcolor="bd3135"
				backcolor_active="b8240c"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="ffffff"
				textcolor_active="ffffff"
				onclicked="$closescreen();
				$callaction(Act_Open_Account_Move, 4121);"
				/>
			<blank width="3%" />
			<button 
				width="45%" 
				height="$result($super.height-$h($g_lcdHeight,1.5))"
				value="취소" 
				backcolor="ffffff"
				backcolor_active="e5e5e5"
				border_width="$g_roundHeight"
				border_color="bd3135"
				fontsize="$g_fontsize_big2"
				fontname="$g_baseFontNameBold"
				textcolor="bd3135"
				textcolor_active="bd3135"
				onclicked="$closescreen();
				$popscreen(pop_caution5);"
				/>
			<blank width="3.5%" />
		</viewgroup>
	</screen>
</popscreen>
<popscreen id="comboPopover"
	width="$g_lcdWidth" 
	height="$p_lcdHeight"
	backcolor="00000088"
	layout="center"
	layout_vertical="bottom"
	onload="popscreen_comboPopover_onload"
	>
	<button
		width="$super.width"
		height="$h($g_lcdHeight,63.5)" 
		/>
	<br />
	<viewgroup
		height="$h($g_lcdHeight,7.3)" 
		backcolor="f8f8f8"
		>
		<button
			layout="right"
			width="$w($g_lcdwidth,15)" 
			height="$h($g_lcdHeight,7.3)" 
			value="완료"
			textcolor="e33433"
			textcolor_active="e33433"
			backcolor="none"
			backcolor_active="none"
			onclicked="combo_choice_confirm"
			//onclicked="$closescreen(popscreen_4117_choice)"
			/>
	</viewgroup>
	<br />
	<screen 
		id="screen_pop_combo"
		width="$super.width"
		height="$this.remain_bottom" 
		margin_right="0"
		border_width="$g_roundHeight"
		border_color="cccccc"
		backcolor="ffffff"
		>
	</screen>
</popscreen>
<action id="popscreen_comboPopover_onload" value="
	$setvar(combo_click_check=false);
	$delarrayvar(arr_table_value);
	
	$setvar(
 		arr_table_value=[
			,[11,11]
			,[12,12]
			,[13,13]
			,[14,14]
			,[15,15]
			,[16,16]
			,[17,17]
			,[18,18]
			,[19,19]
			,[20,20]
			,[21,21]
			,[22,22]
			,[23,23]
			,[24,24]
			,[25,25]
			,[26,26]
			,[28,28]
 			,[경기,경기]
 			,[서울,서울]
			,[경기북부,경기북부]
			,[경기남부,경기남부]
			,[강원,강원]
			,[충북,충북]
			,[충남,충남]
			,[전북,전북]
			,[전남,전남]
			,[경북,경북]
			,[경남,경남]
			,[제주,제주]
			,[대구,대구]
			,[인천,인천]
			,[광주,광주]
			,[대전,대전]
			,[울산,울산]
			,[부산,부산]
 		]
	);
	
	
	$add_parsetag_parent(screen_pop_combo,
		<table 
			width='$super.width' height='$super.height'
			rowheight='$h($g_lcdHeight,7.3)'
			margin_left=''
			nsrowline='true'
			nsrowlinecolor='none'
			selectrow='true'
			selectfixedcol='true'
			selectrow_touchdown='true'
			textcolor_select='222222'
			>
	);
	for($arrCnt=0; $arrCnt<$getarrayvarcount(arr_table_value); $arrCnt++){
		$add_parsetag_parent(screen_pop_combo,
			<tr onclicked='tbl_combo_onclciked' 
				key='[[$getarrayvar(arr_table_value,$arrCnt,0)]]' 
				value='[[$getarrayvar(arr_table_value,$arrCnt,1)]]'
				>
				<td class='css_4125_td_combo' fontsize='$g_fontsize_basic' margin_left='$w($g_lcdWidth,5)' value='[[$getarrayvar(arr_table_value,$arrCnt,1)]]'></td>
			</tr>
		);
	}//for End
	$add_parsetag_parent(screen_pop_combo,
 		</table>
	 );
	 $parsetagend();
"/>
<action id="tbl_combo_onclciked" value="
	$setvar(
		combo_choice_set_key 	= $this.key
		,combo_choice_set_val 	= $this.value
		,combo_click_check 		= true
	);
" />
<action id="combo_choice_confirm" 
value="
	if(!$combo_click_check){
		$alert(,,항목을 선택해 주세요.);
		return;
	}
	$setvar(
		tf_4125_1_1.value=$combo_choice_set_val
	);
	$closescreen(comboPopover);
	$setvar(tf_4125_1_2.focus=true);
"/>
<!--
<action id="act_textfield_onChanged"
value="
	//$log(파라미터 확인 >> $act_textfield_onChanged_param1);

	if($isequal_string($act_textfield_onChanged_param1,1_2)){
		if($strlen($tf_4125_1_2.value)==2){
			$setvar(tf_4125_1_3.focus=true);
		}
	}
	elseif($isequal_string($act_textfield_onChanged_param1,1_3)){
		if($strlen($tf_4125_1_3.value)==6){
			$setvar(tf_4125_1_4.focus=true);
		}
	}
	elseif($isequal_string($act_textfield_onChanged_param1,1_4)){
		if($strlen($tf_4125_1_4.value)==2){
			$setvar(tf_4125_4_4.focus=true);
		}
	}
	elseif($isequal_string($act_textfield_onChanged_param1,4_1)){
		if($strlen($tf_4125_4_1.value)==4){
			$setvar(tf_4125_4_2.focus=true,tf_4125_4_2_marking.hidden_all = true);
		}
	}
	elseif($isequal_string($act_textfield_onChanged_param1,4_2)){
		if($strlen($tf_4125_4_2.value)==2){
			$setvar(tf_4125_4_3.focus=true,tf_4125_4_3_marking.hidden_all = true);
		}
	}
" />
-->
